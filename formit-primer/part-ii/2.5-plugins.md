# 2.5 - Plug-in

FormIt include diversi plug-in che ampliano le funzionalità incorporate. È inoltre possibile installare i plug-in sviluppati da AEC community o crearne di propri.

_In questo capitolo, illustreremo alcuni dei plug-in forniti con FormIt per apportare alcuni miglioramenti al file_ _**Encode Campus Sample Model.axm**. Se non è già stato fatto, è possibile scaricare il file dal_ _**set di dati della Parte II della Guida introduttiva di FormIt**._

## Installazione dei plug-in

1 - Dopo aver aperto il file **Encode Campus Sample Model.axm**, installiamo il nostro primo plug-in:

1. Aprire la **tavolozza Gestione plugin** facendo clic sull'icona del plug-in.
2. Espandere l'elenco a discesa **Consigliato**.
3. Scorrere verso il basso, individuare il plug-in **Generate String Lights** e installarlo facendo clic sul dispositivo di scorrimento a destra del nome del plug-in.
4. Una volta installato il plug-in, la relativa tavolozza verrà aperta automaticamente.
5. Sotto tutte le altre icone della tavolozza dovrebbe essere visualizzata anche una nuova icona.

![](../../.gitbook/assets/install-plugins_0_annotated%20%281%29.png)

![](../../.gitbook/assets/install-plugins_1_annotated.png)

2 - Riaprire la **tavolozza Gestione plugin** e ripetere la procedura due volte per installare i plug-in **Manage Cameras** e **Properties Plus**.

3 - Per verificare che tutti e tre i plug-in siano stati installati correttamente:

1. Ridurre a icona l'elenco a discesa **Consigliato** ed espandere l'elenco a discesa **Installato**. Questo è un modo semplice per vedere solo i plug-in installati.
2. La maggior parte, ma non tutti i plug-in, dispone anche della sua icona, che dovrebbe essere stata aggiunta alla barra degli strumenti con icone della tavolozza. È possibile tornare alla **tavolozza Gestione plugin** in qualsiasi momento e attivare o disattivare i dispositivi di scorrimento dei plug-in, che aggiungeranno o rimuoveranno i plug-in e le relative icone dalla sessione di FormIt.
3. Se sono presenti troppe icone dei plug-in installati per essere visualizzate sullo schermo, è possibile nascondere alcune icone inutilizzate attivando/disattivando la visibilità nell'elenco a discesa **Finestra** sulla barra **Menu principale**.

![](../../.gitbook/assets/2%20%287%29.png)

## Utilizzo dei plug-in - Generate String Lights

_Questo nuovo plug-in consente di aggiungere rapidamente luci sospese al modello in base ad una linea o una curva._

1 - Prima di aggiungere eventuali nuove luci, controlliamo il risultato desiderato utilizzando una scena predefinita nel modello.

1. Per passare alla scena contenente luci stringa esistenti, aprire la **tavolozza Scene** e fare doppio clic sulla scena denominata **Eye Level – Short Alley**.
2. Notare le luci stringa fornite con questo modello: è quello che ricreeremo, ma aggiungendo qualche altro elemento.
3. Nella **tavolozza Layer**, attivare il layer **Helper Geometry** in modo da visualizzare le linee originali utilizzate per generare queste luci stringa.

![](../../.gitbook/assets/3%20%2810%29.png)

2 - Ora passiamo all'altro vialetto e aggiungiamo alcune luci. Nella **tavolozza Scene**, aprire la scena **Eye Level – Long Alley**. Notare che in questo vialetto non sono ancora presenti eventuali luci stringa.

3 - Per creare una nuova stringa di luci:

1. Aprire la **tavolozza Generate String Lights** appena installata facendo clic sull'icona della luce stringa. Per default, le icone per i nuovi plug-in vengono visualizzate nella parte inferiore.
2. Modificare l'opzione **Number of Fixtures** in **10**.
3. Fare doppio clic su una delle linee guida per modificare il gruppo **String Lights – Long Alley** pre-creato. Quindi fare clic una sola volta su una delle linee guida pre-disegnate per selezionarlo.
4. Fare clic sul pulsante **Generate String Lights** all'interno della tavolozza del plug-in. Dovrebbe essere visualizzata una nuova stringa di luci. Si noti che ogni stringa di luci viene creata come gruppo univoco.

![](../../.gitbook/assets/4%20%286%29.png)

_**Nota**_ _È possibile che alcune linee passino attraverso l'insegna "Groove Coffee", poiché il plug-in della luce stringa crea una curva catenaria che va a sparire in maniera realistica sotto l'insegna stessa._

4 - Provare a creare più luci stringa utilizzando le altre linee guida predefinite e/o creando alcune linee guida personalizzate. Utilizzare le impostazioni del plug-in per ottenere risultati diversi.

5 - Per mantenere ordinato il modello, al termine consigliamo di raggruppare tutte le linee guida e posizionare tale gruppo sul layer **Helper Geometry**, nonché assegnare tutti i gruppi di luci stringa al layer **Context – Exterior Lighting**. Ciò impedirà la visualizzazione delle linee guida in una qualsiasi delle scene "Eye Level" dove non desideriamo vederle. Al termine, i risultati dovrebbero essere simili alla schermata successiva. 

![](../../.gitbook/assets/5%20%283%29.png)

_**Nota**_ _A differenza della geometria creata da uno script di Dynamo, che può essere aggiornata e rigenerata mediante la_ _**tavolozza Proprietà**, gli oggetti creati da un plug-in sono \(per la maggior parte\) solo la normale geometria di FormIt. Una volta creati, possono essere modificati solo utilizzando gli strumenti di modellazione incorporati di FormIt._

## Plug-in Manage Cameras

_In tutta la Guida introduttiva, abbiamo utilizzato le scene come strumenti preziosi per navigare e controllare la visibilità in tutto il modello. Questo plug-in ci consente di visualizzare e modificare la quota altimetrica della cinepresa attuale, esportare le cineprese per ogni scena come oggetti 3D e copiare queste scene tra modelli._

1 - Innanzitutto, regoleremo la scena **Eye Level – Long Alley** in modo che la cinepresa sia effettivamente a livello della vista:

1. Se non è già presente, tornare alla scena **Eye Level – Long Alley** facendovi doppio clic nella **tavolozza Scene**.
2. Aprire la **tavolozza Manage Cameras** facendo clic sulla cinepresa con un'icona a forma di ingranaggio.
3. Modificare **Height Above Ground** in **5'-8"**.

![](../../.gitbook/assets/6%20%286%29.png)

_**Nota**_ _Se il modello contiene livelli, questo plug-in mostrerà anche l'altezza al di sopra del livello più vicino sotto_ _**Main Camera**._

2 - Quindi:

1. Tornare alla **tavolozza Scene**.
2. Assicurarsi che la scena **Eye Level – Long Alley** sia ancora selezionata \(altrimenti fare clic una sola volta per selezionarla\).
3. Fare clic sul pulsante **Aggiorna scena** per salvare la nuova altezza della cinepresa in questa scena.

![](../../.gitbook/assets/7%20%281%29.png)

_**Nota**_ _È inoltre possibile regolare l'angolo e la posizione della cinepresa di una scena attivando/disattivando il pulsante_ _**
Modifica cineprese scena**_ _nella parte superiore della_ _**tavolozza Scene**_ _\(tra i pulsanti di aggiornamento e riproduzione\)._

3 - Quindi esportare le scene in un nuovo modello. Innanzitutto, dobbiamo creare oggetti cinepresa per tutte le scene utilizzando il plug-in **Manage Cameras**:

1. Aprire nuovamente la **tavolozza Manage Cameras**.
2. Verificare che l'opzione **Copy Cameras to Clipboard** sia selezionata.
3. Fare clic sul pulsante **Export Scenes to Cameras**. Questa operazione potrebbe richiedere alcuni secondi.
4. Se l'intera area di disegno è diventata bianca, è perché la **cinepresa principale** è stata allineata con una delle cineprese della scena. Eseguire lo zoom indietro con **Zoom \(Z\)** fino a quando non si possono vedere i 3 edifici principali e gli oggetti cinepresa appena creati. Notare che gli oggetti cinepresa vengono automaticamente posizionati in un gruppo di grandi dimensioni denominato **Cameras**. All'interno di tale gruppo, ogni singola cinepresa viene posizionata nel relativo gruppo con lo stesso nome delle scene da cui è stata creata.

![](../../.gitbook/assets/8%20%287%29.png)

4 - Copiamo queste scene in un nuovo modello. Poiché i dati della cinepresa sono stati salvati negli Appunti, non è necessario eseguire molte operazioni:

1. Selezionare **Salva** **\(CTRL+S\)** per salvare il modello corrente e chiuderlo.
2. Avviare un nuovo disegno vuoto selezionando **Nuovo disegno \(CTRL+N\)** dall'elenco a discesa **File** sulla barra **Menu principale**.
3. Aprire il plug-in **Manage Cameras**, se non è già aperto, e verificare che l'opzione **Look for Cameras on Clipboard** sia selezionata.
4. Fare clic sul pulsante **Import Scenes from Cameras** nella parte inferiore del plug-in e le scene dell'altro modello verranno importate. Per verificare, aprire la **tavolozza Scene** e/o attivare il layer **Camera**. Come si può vedere, tutte le scene e gli oggetti cinepresa 3D sono stati importati in questo modello.

![](../../.gitbook/assets/9%20%287%29.png)

## Plug-in Properties Plus

_Questo plug-in è una versione più completa della_ _**tavolozza Proprietà** standard. Se si selezionano più gruppi e/o tipi di geometria, questo plug-in fornirà una suddivisione degli elementi selezionati, oltre a consentire la ridenominazione di massa di gruppi e istanze di gruppi._

1 **-** Esamineremo innanzitutto le proprietà di un gruppo di porte del nostro modello principale. Riaprire **Encode Campus Sample Model.axm** e tornare alla scena **Eye Level – Long Alley**. Per iniziare ad utilizzare il plug-in **Properties Plus**:

1. Aprire la **tavolozza Properties Plus** facendo clic sulla proprietà con un'icona a forma del simbolo "più".
2. Assicurarsi che l'opzione **Update on Selection Change** sia selezionata.
3. Selezionare uno dei gruppi di porte vetrate a due pannelli, denominato **Door**, sul lato destro del vialetto.
4. Nell'area **Selection Count**, **Total Objects** indica che è stato selezionato un \(**1**\) oggetto.
5. Qui sotto sono disponibili ulteriori informazioni sui tipi di oggetti selezionati. In questo caso, è stato selezionato un \(**1**\) gruppo, ma tale gruppo presenta quattro \(**4**\) istanze da qualche parte nel modello.

![](../../.gitbook/assets/10%20%282%29.png)

_**Nota**_ _La verifica del numero di istanze del gruppo selezionato può risultare molto utile per evitare la modifica accidentale di più elementi quando si desidera effettivamente cambiare solo l'elemento selezionato, ma prima si è dimenticato di renderlo univoco._

2 - Questo plug-in consente di modificare il nome di un gruppo o di un'istanza di gruppo senza dover passare alla modalità di modifica del gruppo e rinominare più istanze contemporaneamente. Come abbiamo appreso in precedenza, ogni gruppo ha un nome, ma ogni istanza di quel gruppo può anche avere un nome di "istanza" univoco. Poiché probabilmente in questo modello vi saranno molti tipi di porte, desideriamo assegnare a questo gruppo, e ad alcune delle sue istanze, nomi più specifici.

1. Con il primo gruppo **Door** di vetro ancora selezionato, aggiungere un altro gruppo **Door** alla selezione corrente tenendo premuto **MAIUSC** o **CTRL** e facendo clic una sola volta sull'altro gruppo **Door** a due pannelli di vetri vicino al primo.
2. Notare che ora nella **tavolozza Properties Plus** è stata aggiornata l'opzione **Selection Count** per mostrare che sono selezionate due \(**2**\) istanze, ma che è ancora selezionata una sola \(**1**\) **famiglia** univoca \(nota anche come gruppo\). \(Anche se questo plug-in utilizza il termine **famiglia**, che gli utenti di Revit dovrebbero conoscere, in questo contesto ha lo stesso significato di un gruppo di FormIt.\)
3. Nell'area **Group Family**, aggiornare il campo **Name** in **Doors – Double Glass Storefront**. In questo modo il nome del gruppo verrà aggiornato per tutte le istanze, indipendentemente dal luogo in cui si trovano o dal fatto che siano attualmente selezionate o meno, senza dover fare doppio clic e modificare il gruppo.
4. Poiché queste due istanze sono entrambe porte nell'area Groove Coffee, rinominiamo solo queste due istanze immettendo **Groove Coffee Door** nel campo **Name** nell'area **Multiple Group Instances**.

**Nota** Nella **tavolozza Proprietà** standard, non è possibile rinominare più istanze di un gruppo contemporaneamente. Ciò può risultare estremamente utile quando si desidera assegnare a decine o centinaia di istanze lo stesso nome contemporaneamente.

![](../../.gitbook/assets/11%20%286%29.png)

_**Nota**_ _Se si sposta il mouse dalla tavolozza, non sarà più possibile modificare la casella di testo selezionata. Ciò vale per tutte le tavolozze, pertanto è necessario mantenere il cursore all'interno del contorno della tavolozza durante la modifica di qualsiasi elemento di una tavolozza._

3 - Ora, se si seleziona una porta in vetro di Groove Coffee o una porta in vetro diversa e si osservano le relative proprietà nella normale **tavolozza Proprietà**, si noterà che il nome di **Gruppo** è stato aggiornato per ogni istanza, ma solo per le porte di Groove Coffee la proprietà **Nome** è stata aggiornata rispetto al valore di default.

![](../../.gitbook/assets/12%20%283%29.png)

4 - Infine, vediamo come questo plug-in consente di ordinare diversi tipi di elementi:

1. Disegnare rapidamente una **Linea \(L\)**, un **Rettangolo \(R\)** e un **Cubo \(Alt + B\)** in qualsiasi punto del modello. Questi elementi saranno temporanei, pertanto la loro posizione precisa non è importante.
2. Riaprire la **tavolozza Properties Plus**, se è stata chiusa, quindi premere **CTRL+A** per selezionare tutti gli elementi visibili nel modello.
3. Esaminare l'area **Selection Count** e notare che gli elementi selezionati sono separati in **Edges** \(linee\), **Faces**, **Bodies**, \(forme 3D di composte da superfici e bordi, come il cubo\)**,** **Groups** e così via.

![](../../.gitbook/assets/13%20%283%29.png)

_**Nota**_ _Questo plug-in rileva anche i_ _**vertici**, che possono essere creati utilizzando un altro plug-in denominato_ _**Generate Vertex**. Se si desidera sperimentarne l'utilizzo, installare il_ _**plug-in Generate Vertex**_ _e ripetere i passaggi precedenti._

## Plugin Playground

_Per sperimentatori e sviluppatori, FormIt viene fornito anche con un plug-in che consente di creare e testare i plug-in personalizzati direttamente all'interno di FormIt. Per sfruttare al meglio questo strumento, è necessario conoscere HTML, CSS e JavaScript. Non approfondiremo questo argomento qui, ma per saperne di più, è possibile visitare la pagina_ [_**Building FormIt JavaScript Plugins**_](https://formit3d.github.io/FormItExamplePlugins/docs/HowToBuild.html)_._

1 - È possibile installare **Plugin Playground** nello stesso modo in cui sono stati installati i plug-in precedenti dalla **tavolozza Plugin**.

2 - Di seguito è presentata una panoramica di base di **Plugin Playground**:

1. Aprire la **tavolozza Plugin Playground** facendo clic sull'icona __a forma di matita__.
2. All'interno della tavolozza, fare clic sul pulsante **Edit** per aprire l'editor di codice incorporato per la creazione di plug-in personalizzati. Questo plug-in viene pre-caricato con del codice per un plug-in che crea un cubo.
3. Fare clic sul pulsante di **riproduzione** per eseguire il test del codice corrente. In questo caso, il contenuto del plug-in del creatore del cubo verrà visualizzato nella tavolozza.

![](../../.gitbook/assets/14%20%283%29.png)

