# 2.5 – Plug-ins

FormIt est fourni avec plusieurs plug-ins qui étendent ses capacités intégrées. Vous pouvez également installer des plug-ins développés par la communauté AEC, ou même créer vos propres plug-ins.

_Dans ce chapitre, nous allons utiliser certains des plug-ins fournis avec FormIt afin d’améliorer le fichier_ _**Encode Campus Sample Model.axm**. Si ce n’est pas déjà fait, téléchargez le fichier à partir du dossier_ _**FormIt Primer Part 2 Datasets** (Jeux de données de la partie II du guide FormIt Primer)._

## Installation des plug-ins

1 – Une fois que vous avez ouvert le fichier **Encode Campus Sample Model.axm**, installez le premier plug-in :

1. Cliquez sur l’icône en forme de prise électrique pour ouvrir la **palette Gestionnaire de plug-ins**.
2. Développez la liste déroulante **Recommandé**.
3. Faites défiler la liste vers le bas et recherchez le plug-in **Generate String Lights** (Générer des guirlandes lumineuses), puis installez-le en cliquant sur le curseur situé à droite du nom du plug-in.
4. Une fois le plug-in installé, sa palette s’ouvre automatiquement.
5. Une nouvelle icône doit également apparaître sous toutes les autres icônes de palette.

![](../../.gitbook/assets/install-plugins_0_annotated%20%281%29.png)

![](../../.gitbook/assets/install-plugins_1_annotated.png)

2 – Rouvrez la **palette Gestionnaire des plug-ins** et répétez la procédure deux fois pour installer les plug-ins **Manage Cameras** (Gérer les caméras) et **Properties Plus** (Propriétés plus).

3 – Pour confirmer que les trois plug-ins ont été installés correctement, procédez comme suit :

1. Réduisez la liste déroulante **Recommandé** et développez la liste déroulante **Installé**. Cela permet d’afficher uniquement les plug-ins installés.
2. La plupart des plug-ins (mais pas tous), sont également fournis avec leur propre icône, qui a normalement été ajoutée à la barre d’icônes de palette. Vous pouvez revenir à la **palette Gestionnaire de plug-ins** à tout moment et activer ou désactiver les curseurs de plug-ins, ce qui permet d’ajouter ou de supprimer les plug-ins et leurs icônes de votre session FormIt.
3. Si vous ne pouvez pas afficher toutes les icônes des plug-ins installés sur votre écran, désactivez les icônes inutilisées dans la liste déroulante **Fenêtre** de la **barre de menus** principale.

![](../../.gitbook/assets/2%20%287%29.png)

## Utilisation de plug-ins – Generate String Lights (Générer des guirlandes lumineuses)

_Ce plug-in intéressant vous permet d’ajouter rapidement des lumières suspendues à votre modèle selon une ligne ou une courbe._

1 – Avant d’ajouter de nouvelles lumières, examinons le résultat souhaité à l’aide d’une scène prédéfinie dans le modèle.

1. Pour accéder à la scène contenant des guirlandes lumineuses, ouvrez la **palette Scènes** et double-cliquez sur la scène intitulée **Eye Level – Short Alley** (Au niveau du regard – Petite allée).
2. Observez les guirlandes lumineuses fournies avec ce modèle. C’est ce que nous allons recréer, mais ailleurs.
3. Dans la **palette Calques**, activez le calque **Helper Geometry** (Géométrie de l’assistant) afin d’afficher les lignes d’origine utilisées pour générer ces guirlandes lumineuses.

![](../../.gitbook/assets/3%20%2810%29.png)

2 – Naviguons maintenant jusqu’à l’autre allée et ajoutons des lumières. Dans la **palette Scènes**, ouvrez la scène **Eye Level – Long Alley** (Au niveau du regard – Longue allée). Notez que cette allée ne comporte pas encore de guirlandes lumineuses.

3 – Pour créer une nouvelle guirlande lumineuse, procédez comme suit :

1. Pour ouvrir la **palette Generate String Lights** (Générer des guirlandes lumineuses) nouvellement installée, cliquez sur l’icône en forme de guirlande lumineuse. Par défaut, les icônes des nouveaux plug-ins s’affichent dans la partie inférieure.
2. Définissez l’option **Nombre de dispositifs** sur **10**.
3. Double-cliquez sur l’une des lignes d’assistance pour modifier le groupe précréé **String Lights – Long Alley** (Guirlandes lumineuses – Longue allée). Ensuite, cliquez une fois sur l’une des lignes d’assistance prédessinées pour la sélectionner.
4. Cliquez sur le bouton **Générer des guirlandes lumineuses** dans la palette du plug-in, et une nouvelle guirlande lumineuse apparaît. Notez que chaque guirlande lumineuse est créée en tant que groupe unique.

![](../../.gitbook/assets/4%20%286%29.png)

_**Remarque :**_ _il est possible que certaines lignes passent par le panneau « Groove Coffee », car le plug-in de guirlandes lumineuses crée une courbe caténaire qui s’affaisse de manière réaliste sous le panneau._

4 – Essayez de créer d’autres guirlandes lumineuses en utilisant l’autre ligne d’assistance prédéfinie et/ou en créant vos propres lignes d’aide. Jouez avec les paramètres du plug-in pour obtenir des résultats différents.

5 – Pour que le modèle reste organisé, une fois l’opération terminée, nous vous recommandons de regrouper toutes les lignes d’assistance et de placer ce groupe sur le calque **Helper Geometry** (Géométrie de l’assistant), et d’affecter tous les groupes de guirlandes lumineuses au calque **Context – Exterior Lighting** (Contexte – Éclairage extérieur). Cela permet de masquer les lignes d’assistance dans les scènes « Eye Level » (Au niveau du regard) où nous ne voulons pas les voir. Lorsque vous avez terminé, les résultats doivent ressembler à la capture d’écran suivante.

![](../../.gitbook/assets/5%20%283%29.png)

_**Remarque :**_ _contrairement à la géométrie créée à partir d’un script Dynamo, qui peut être mise à jour et régénérée à l’aide de la_ _**palette Propriétés**, les objets créés par un plug-in sont \(pour la plupart\) des géométries FormIt standard. Une fois créés, ils peuvent uniquement être modifiés à l’aide des outils de modélisation intégrés de FormIt._

## Plug-in Manage Cameras (Gérer les caméras)

_Tout au long du guide, nous avons utilisé les scènes comme des outils précieux afin de naviguer et de contrôler la visibilité dans l’ensemble du modèle. Ce plug-in permet d’afficher et de modifier l’élévation de la caméra actuelle, d’exporter les caméras de chaque scène en tant qu’objets 3D et de copier ces scènes entre les modèles._

1. Tout d’abord, nous allons ajuster la scène **Eye Level – Long Alley** (Au niveau du regard – Longue allée) de sorte que sa caméra soit réellement au niveau du regard :

1. Si ce n’est pas déjà fait, double-cliquez sur la scène **Eye Level – Long Alley** (Au niveau du regard – Longue allée) dans la **palette Scènes** pour y revenir.
2. Cliquez sur l’icône en forme d’appareil photo avec une icône d’engrenage pour ouvrir la **palette Gérer les caméras**.
3. Définissez la valeur de **Hauteur au-dessus du sol** sur **5 pi–8 po**.

![](../../.gitbook/assets/6%20%286%29.png)

_**Remarque :**_ _si votre modèle possède des niveaux, ce plug-in affiche également la hauteur au-dessus du niveau le plus proche sous la_ _**Caméra principale**._

2 – Ensuite, procédez comme suit :

1. Revenez à la **palette Scènes**.
2. Assurez-vous que la scène **Eye Level – Long Alley** (Au niveau du regard – Longue allée) est toujours sélectionnée \(sinon, cliquez une fois dessus pour la sélectionner\).
3. Cliquez sur le bouton **Mettre à jour la scène** pour enregistrer la nouvelle hauteur de caméra dans cette scène.

![](../../.gitbook/assets/7%20%281%29.png)

_**Remarque :**_ _vous pouvez également ajuster l’angle et la position de la caméra d’une scène en activant le bouton_ _**Modifier les caméras de la scène**_ _situé dans la partie supérieure de la_ _**palette Scènes**_ _\(entre les boutons de mise à jour et de lecture)._

3 – Exportons ensuite nos scènes vers un nouveau modèle. Tout d’abord, nous devons créer des objets caméra pour toutes les scènes à l’aide du plug-in **Manage Cameras** (Gérer les caméras) :

1. Ouvrez à nouveau la **palette Gérer les caméras**.
2. Assurez-vous que l’option **Copier les caméras dans le Presse-papiers** est sélectionnée.
3. Cliquez sur le bouton **Exporter les scènes vers les caméras**. Cette opération peut prendre quelques secondes.
4. Si la zone de dessin devient entièrement blanche, c’est parce que votre **caméra principale** était alignée avec l’une des caméras de la scène. Utilisez l’outil **Zoom \(Z\)** pour effectuer un zoom arrière jusqu’à ce que vous puissiez distinguer les 3 bâtiments principaux et les nouveaux objets de caméra. Notez que les objets caméra sont automatiquement placés dans un grand groupe nommé **Cameras** (Caméras). Dans ce groupe, chaque caméra est placée dans son propre groupe avec le même nom que les scènes à partir desquelles elle a été créée.

![](../../.gitbook/assets/8%20%287%29.png)

4 – Copions ces scènes dans un nouveau modèle. Étant donné que les données de caméra ont été enregistrées dans le Presse-papiers, il ne reste pas grand-chose à faire :

1. **Enregistrez** **\(Ctrl + S\)** votre modèle actuel, puis fermez-le.
2. Pour commencer une nouvelle esquisse vide, sélectionnez **Nouvelle esquisse \(Ctrl + N\)** dans la liste déroulante **Fichier** de la barre du **menu principal**.
3. Ouvrez le plug-in **Manage Cameras** (Gérer les caméras), s’il n’est pas déjà ouvert, et assurez-vous que l’option **Rechercher les caméras dans le Presse-papiers** est sélectionnée.
4. Cliquez sur le bouton **Importer des scènes à partir de caméras** situé dans la partie inférieure du plug-in. Les scènes de l’autre modèle sont importées. Pour vérifier, ouvrez la **palette Scènes** et/ou activez le calque **Camera** (Caméra). Vous pouvez constater que toutes les scènes et tous les objets de caméra 3D ont été importés dans ce modèle.

![](../../.gitbook/assets/9%20%287%29.png)

## Plug-in Properties Plus (Propriétés plus)

_Ce plug-in est une version plus avancée de la_ _**palette Propriétés** standard. Si vous sélectionnez plusieurs groupes et/ou types de géométrie, ce plug-in vous fournit le détail de ce qui a été sélectionné, et vous permet de renommer en bloc des groupes et des occurrences de groupe._

1 **– **Tout d’abord, nous allons examiner les propriétés d’un groupe de portes à partir de notre modèle de base. Rouvrez le fichier **Encode Campus Sample Model.axm** et revenez à la scène **Eye Level – Long Alley** (Au niveau du regard – Longue allée). Pour commencer à utiliser le plug-in **Properties Plus** (Propriétés plus), procédez comme suit :

1. Pour ouvrir la **palette Properties Plus** (Propriétés plus), cliquez sur la propriété portant l’icône « plus ».
2. Assurez-vous que l’option **Mettre à jour lors du changement de sélection** est cochée.
3. Sélectionnez l’un des groupes de portes à double vitre, nommé **Door** (Porte), sur le côté droit de l’allée.
4. Dans la zone **Compteur de sélections**, l’option **Nombre total d’objets** indique qu’un objet \(**1**\) est sélectionné.
5. Juste en dessous, vous trouverez plus d’informations sur les types d’objets sélectionnés. Dans ce cas, un groupe \(**1**\) est sélectionné, mais ce groupe comporte quatre occurrences \(**4**\) dans le modèle.

![](../../.gitbook/assets/10%20%282%29.png)

_**Remarque :**_ _il peut s’avérer très pratique de vérifier le nombre d’occurrences du groupe sélectionné pour éviter de modifier accidentellement plusieurs éléments lorsque vous souhaitiez uniquement modifier l’élément sélectionné, mais que vous avez oublié de le rendre unique avant._

2 – Ce plug-in nous permet d’éditer le nom d’une occurrence de groupe ou d’un groupe sans avoir à passer en mode de modification de groupe, et de renommer plusieurs instances à la fois. Comme nous l’avons vu précédemment, chaque groupe a un nom, mais chaque occurrence de ce groupe peut également avoir un nom « d’instance » unique. Étant donné que ce modèle va probablement contenir de nombreux types de portes, il est préférable d’attribuer à ce groupe, et à certaines de ses occurrences, des noms plus spécifiques.

1. Étant donné que le premier groupe de portes vitrées **Door** (Porte) est toujours sélectionné, ajoutez un autre groupe **Door** (Porte) à votre sélection actuelle. Pour ce faire, maintenez la touche **Maj** ou **Ctrl** enfoncée et cliquez une fois sur l’autre groupe de portes à double vitre **Door** (Porte) situé près du premier groupe.
2. Notez que la **palette Properties Plus** (Propriétés plus) a mis à jour le **Compteur de sélections** pour indiquer que deux occurrences \(**2**\) sont sélectionnées, mais qu’une seule \(**1**\) **famille** \(également appelé groupe\) est sélectionnée. \(Bien que ce plug-in utilise le terme **Famille**, que les utilisateurs de Revit connaissent, dans ce contexte, il signifie la même chose qu’un groupe FormIt.\)
3. Sous la zone **Famille de groupes**, définissez le champ **Nom** sur **Doors – Double Glass Storefront** (Portes – Vitrine à double vitre). Cela permet de mettre à jour le nom du groupe pour toutes les occurrences, où qu’elles se trouvent et peu importe si elles sont sélectionnées ou non, sans avoir à double-cliquer sur le groupe pour le modifier.
4. Comme ces deux occurrences sont des portes dans la zone Groove Coffee, renommez uniquement ces deux occurrences en saisissant **Groove Coffee Door** (Porte Groove Coffee) dans le champ **Nom** sous la zone **Occurrences de groupes multiples**.

**Remarque :** dans la **palette Propriétés** standard, il n’est pas possible de renommer plusieurs occurrences d’un groupe à la fois. Cela peut s’avérer très pratique lorsque vous souhaitez renommer des dizaines ou des centaines d’occurrences du même nom à la fois.

![](../../.gitbook/assets/11%20%286%29.png)

_**Remarque :**_ _si vous quittez la palette avec la souris, vous ne pourrez plus modifier la zone de texte sélectionnée. Ceci est vrai pour toutes les palettes. Par conséquent, lorsque vous modifiez des éléments à l’intérieur d’une palette, veillez à maintenir le curseur à l’intérieur du contour de la palette._

3 – Si vous sélectionnez une porte vitrée Groove Coffee ou une autre porte vitrée et que vous examinez ses propriétés dans la **palette Propriétés** standard, vous verrez que le nom du **groupe** a été mis à jour pour chaque occurrence, mais que seule la propriété **Nom** de l’occurrence des portes Groove Coffee est mise à jour par rapport à sa valeur par défaut.

![](../../.gitbook/assets/12%20%283%29.png)

4 – Enfin, examinons comment ce plug-in trie différents types d’éléments :

1. Tracez rapidement une **ligne \(L\)**, un **rectangle \(R\)** et un **cube \(Alt + B\)** à l’endroit souhaité dans le modèle. Comme ces éléments sont temporaires, leur emplacement n’a pas d’importance.
2. Rouvrez la **palette Properties Plus** (Propriétés plus) si elle a été fermée, puis appuyez sur **Ctrl + A** pour sélectionner tous les éléments visibles dans le modèle.
3. Dans la zone **Compteur de sélections**, notez que les éléments sélectionnés sont séparés en **arêtes** \(lignes\), **faces**, **corps**, \(formes 3D constituées de faces et d’arêtes, comme le cube\)**,** **groupes**, etc.

![](../../.gitbook/assets/13%20%283%29.png)

_**Remarque :**_ _ce plug-in détecte également les__ **sommets**, qui peuvent être créés à l’aide d’un autre plug-in appelé_ _**Generate Vertex** (Générer le sommet). Si vous souhaitez faire des essais, installez le_ _**plug-in Generate Vertex**__ (Générer le sommet) et répétez les étapes ci-dessus._

## Plugin Playground (Playground de plug-ins)

_FormIt est également fourni avec un plug-in qui permet aux amateurs et aux développeurs de créer et de tester leurs propres plug-ins personnalisés directement dans FormIt. Pour tirer pleinement parti de cet outil, vous devez connaître les langages HTML, CSS et JavaScript. Nous n’allons pas entrer dans les détails ici, mais si vous souhaitez en savoir plus, consultez la page_ [_**Building FormIt JavaScript Plugins **_](https://formit3d.github.io/FormItExamplePlugins/docs/HowToBuild.html)_relative à la création de plug-ins FormIt JavaScript._

1 – Vous pouvez installer le plug-in **Plugin Playground** (Playground de plug-ins) de la même façon que les plug-ins précédents à partir de la **palette Plug-in**.

2 – Voici un bref aperçu du plug-in **Plugin Playground** (Playground de plug-ins) :

1. Pour ouvrir la **palette Plugin Playground** (Playground de plug-ins), cliquez sur l’icône _<_crayon_>_.
2. Dans la palette, cliquez sur le bouton **Modifier** pour ouvrir l’éditeur de code intégré permettant de créer des plug-ins personnalisés. Ce plug-in est préchargé avec le code d’un plug-in permettant de créer un cube.
3. Cliquez sur le bouton **Lecture** pour tester le code actuel. Dans ce cas, le contenu du plug-in du créateur du cube s’affiche dans la palette.

![](../../.gitbook/assets/14%20%283%29.png)

