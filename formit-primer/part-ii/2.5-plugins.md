# 2.5. Подключаемые модули

В FormIt доступно несколько подключаемых модулей, расширяющих встроенные возможности программы. Кроме того, можно установить подключаемые модули, разработанные сообществом AEC, или создать собственные.

_В этой главе мы рассмотрим примеры использования некоторых подключаемых модулей FormIt, позволяющие внести ряд улучшений в файл_ _**Encode Campus Sample Model.axm**. Если вы еще этого не сделали, данный файл можно скачать из_ _**набора данных к части II руководства FormIt Primer**._

## Установка подключаемых модулей

1 - После открытия файла **Encode Campus Sample Model.axm** установите первый подключаемый модуль.

1. Откройте **палитру Диспетчера подключаемых модулей**, щелкнув соответствующий значок.
2. Разверните раскрывающийся список **Рекомендуется**.
3. Прокрутите список вниз и найдите подключаемый модуль **Generate String Lights**. Установите его, щелкнув переключатель справа от имени подключаемого модуля.
4. После установки подключаемого модуля автоматически откроется его палитра.
5. Кроме того, под другими значками палитры должен появиться новый значок.

![](../../.gitbook/assets/install-plugins_0_annotated%20%281%29.png)

![](../../.gitbook/assets/install-plugins_1_annotated.png)

2 - Снова откройте **палитру Диспетчера подключаемых модулей** и повторите процедуру еще раз, чтобы установить подключаемые модули **Manage Cameras** и **Properties Plus**.

3 - Чтобы убедиться, что все три подключаемых модуля установлены успешно, выполните следующие действия.

1. Сверните раскрывающийся список **Рекомендуется** и разверните раскрывающийся список **Установлено**. В нем указаны только установленные подключаемые модули.
2. Почти все подключаемые модули имеют собственный значок, который должен быть виден на панели инструментов со значками. Подключаемый модуль можно при необходимости включить или отключить на **палитре Диспетчера подключаемых модулей**, в результате чего он будет добавлен в сеанс FormIt или удален из него.
3. Если из-за большого количества установленных подключаемых модулей их значки не умещаются на экране, можно скрыть некоторые неиспользуемые значки, отключив их видимость в раскрывающемся списке **Окно** в строке **главного меню**.

![](../../.gitbook/assets/2%20%287%29.png)

## Использование подключаемых модулей: Generate String Lights

_Этот подключаемый модуль позволяет быстро добавить подвесные источники света в модель вдоль линии или кривой._

1 - Перед добавлением новых источников света проверьте, каким должен быть результат, с помощью готовой сцены в модели.

1. Для перехода к сцене с готовыми гирляндами откройте **палитру «Сцены»** и дважды щелкните сцену **Eye Level — Short Alley**.
2. Обратите внимание на гирлянды, которые уже есть в модели. Мы собираемся воссоздать их, но в другом месте.
3. На **палитре «Слой»** включите слой **Helper Geometry**, чтобы можно было видеть исходные линии, использованные для создания этих гирлянд.

![](../../.gitbook/assets/3%20%2810%29.png)

2 - Перейдите к другой аллее и добавьте несколько источников света. На **палитре «Сцены»** откройте сцену **Eye Level — Long Alley**. Обратите внимание, что на этой аллее еще нет ни одной гирлянды.

3 - Чтобы создать последовательность источников света, выполните следующие действия.

1. Откройте установленную ранее **палитру Generate String Lights**, щелкнув соответствующий значок. По умолчанию значки новых подключаемых модулей отображаются внизу.
2. Измените значение параметра **Number of Fixtures** на **10**.
3. Дважды щелкните одну из вспомогательных линий, чтобы отредактировать созданную ранее группу **String Lights — Long Alley**. Щелкните одну из предварительно созданных вспомогательных линий, чтобы выбрать ее.
4. Нажмите кнопку **Generate String Lights** на палитре подключаемого модуля, после чего должна появиться новая гирлянда. Обратите внимание, что каждая последовательность источников света создается как отдельная уникальная группа.

![](../../.gitbook/assets/4%20%286%29.png)

_**Примечание.**_ _Не обращайте внимания на то, что некоторые линии проходят сквозь знак Groove Coffee, так как подключаемый модуль Generate String Lights создает кривую провеса с реалистичным изгибом под знаком._

4 - Попробуйте создать другие гирлянды, используя другую готовую вспомогательную линию и/или создав несколько собственных вспомогательных линий. Попробуйте изменить настройки подключаемого модуля, чтобы получить другие результаты.

5 - Чтобы упорядочить данные модели, рекомендуется в конце сгруппировать все вспомогательные линии и разместить данную группу в слое **Helper Geometry**, а также назначить все группы гирлянд слою **Context — Exterior Lighting**. Это позволит избежать отображения вспомогательных линий в сценах Eye Level, где это не требуется. После завершения результаты должны выглядеть примерно так, как показано на следующем снимке экрана.

![](../../.gitbook/assets/5%20%283%29.png)

_**Примечание.**_ _В отличие от геометрии, созданной с помощью сценария Dynamo, которую можно обновить и регенерировать с помощью_ _**палитры свойств**, объекты, созданные посредством подключаемого модуля, в большинстве случаев представляют собой обычную геометрию FormIt. После создания их можно редактировать только с помощью встроенных инструментов моделирования FormIt._

## Подключаемый модуль Manage Cameras

_В данном руководстве сцены используются в качестве эффективных инструментов навигации и управления видимостью модели. Этот подключаемый модуль позволяет просматривать и редактировать отметку текущей камеры, экспортировать камеры для каждой сцены в виде 3D-объектов и копировать эти сцены между моделями._

1 - Сначала скорректируйте сцену **Eye Level — Long Alley** так, чтобы камера находилась на уровне глаз.

1. Если сцена еще не открыта, вернитесь к сцене **Eye Level — Long Alley**, дважды щелкнув ее на **палитре «Сцены»**.
2. Откройте **палитру Manage Cameras**, щелкнув значок настроек камеры.
3. Измените значение параметра **Height Above Ground** на **5 футов 8 дюймов**.

![](../../.gitbook/assets/6%20%286%29.png)

_**Примечание.**_ _Если модель содержит уровни, этот подключаемый модуль также показывает высоту над ближайшим уровнем под_ _**основной камерой**._

2 - Следующий шаг.

1. Вернитесь на **палитру «Сцены»**.
2. Убедитесь, что сцена **Eye Level — Long Alley** все еще выбрана. \(В противном случае для выбора щелкните ее один раз.\)
3. Нажмите кнопку **Обновить сцену**, чтобы сохранить новое значение высоты камеры в этой сцене.

![](../../.gitbook/assets/7%20%281%29.png)

_**Примечание.**_ _Угол и положение камеры в сцене также можно настроить, нажав кнопку_ _**Редактировать камеры сцены**_ _в верхней части_ _**палитры «Сцены»**_ _\(между кнопками «Обновить» и «Воспроизведение»\)._

3 - Экспортируйте сцены в новую модель. Сначала с помощью подключаемого модуля **Manage Cameras** необходимо создать объекты камер для всех сцен.

1. Снова откройте **палитру Manage Cameras**.
2. Убедитесь, что установлен флажок **Copy Cameras to Clipboard**.
3. Нажмите кнопку **Export Scenes to Cameras**. Процесс может занять несколько секунд.
4. Если вся рабочая область стала белой, значит, **основная камера** расположена параллельно одной из камер сцены. **Уменьшите масштаб \(Z\)**, пока не увидите 3 основных здания и созданные объекты камер. Обратите внимание, что объекты камер автоматически помещаются в одну большую группу **Cameras**. Внутри этой группы каждая камера помещается в отдельную группу с тем же именем, что и сцены, на основе которых она была создана.

![](../../.gitbook/assets/8%20%287%29.png)

4 - Скопируйте сцены в новую модель. Поскольку данные камер были сохранены в буфере обмена, осталось выполнить всего несколько шагов.

1. **Сохраните** **\(CTRL + S\)** текущую модель и закройте ее.
2. Создайте пустой эскиз, выбрав команду **Создать эскиз \(CTRL + N\)** в раскрывающемся меню **Файл** в строке **главного меню**.
3. Откройте подключаемый модуль **Manage Cameras**, если он еще не открыт, и убедитесь, что установлен флажок **Look for Cameras on Clipboard**.
4. Нажмите кнопку **Import Scenes from Cameras** в нижней части подключаемого модуля, чтобы импортировать сцены из другой модели. Для проверки откройте **палитру «Сцены»** и/или включите слой **Камера**. Можно видеть, что все сцены и 3D-объекты камер были импортированы в эту модель.

![](../../.gitbook/assets/9%20%287%29.png)

## Подключаемый модуль Properties Plus

_Этот подключаемый модуль представляет собой расширенную версию стандартной_ _**палитры свойств**. Если выбрано несколько групп и/или типов геометрии, этот подключаемый модуль предоставляет детализацию выбранных элементов, а также позволяет выполнять групповое переименование групп и экземпляров групп._

1 **-** Сначала изучите свойства группы дверей в главной модели. Еще раз откройте файл **Encode Campus Sample Model.axm** и вернитесь к сцене **Eye Level — Long Alley**. Для начала работы с подключаемым модулем **Properties Plus** выполните следующие действия.

1. Откройте **палитру Properties Plus**, щелкнув свойство со значком «плюс».
2. Убедитесь, что установлен флажок **Update on Selection Change**.
3. Выберите одну из групп дверей с двойным остеклением под названием **Door** с правой стороны аллеи.
4. В области **Selection Count** в поле **Total Objects** указано, что выбран 1 \(**один**\) объект.
5. Ниже можно найти дополнительную информацию о типах выбранных объектов. В данном случае выбрана 1 \(**одна**\) группа, а 4 /(**четыре**\) экземпляра из этой группы находятся где-то в модели.

![](../../.gitbook/assets/10%20%282%29.png)

_**Примечание.**_ _Проверка количества экземпляров выбранной группы позволяет предотвратить случайное изменение нескольких элементов, если требовалось изменить только выбранный элемент, но вы забыли сделать его уникальным._

2 - Этот подключаемый модуль позволяет редактировать имя группы или экземпляра группы без перехода в режим редактирования группы и переименовывать несколько экземпляров одновременно. Как вы уже знаете, у каждой группы есть имя, но каждый экземпляр этой группы может иметь собственное уникальное имя. Поскольку в модели, скорее всего, будет много типов дверей, необходимо присвоить этой группе и некоторым ее экземплярам более конкретные имена.

1. Не отменяя выбор первой группы остекленных **дверей**, добавьте к ним еще одну группу **дверей**, нажав и удерживая клавишу **SHIFT** или **CTRL** и один раз щелкнув другую группу **дверей** с двойным остеклением, расположенную рядом с первой.
2. Обратите внимание, что на **палитре Properties Plus** было обновлено значение параметра **Selection Count**: теперь выбрано 2 \(**два**\) экземпляра, но только 1 \(**одно**\) уникальное **семейство** \(группа\). \(Хотя в этом подключаемом модуле используется термин **семейство**, который должен быть знаком пользователям Revit, в данном контексте он означает то же самое, что и группа FormIt.\)
3. В области **Group Family** измените значение в поле **Name** на **Doors — Double Glass Storefront**. После этого имя группы будет обновлено для всех экземпляров независимо от их местонахождения и от того, выбраны ли они в данный момент \(не нужно дважды щелкать мышью и редактировать группу\).
4. Так как оба экземпляра представляют собой двери в области кофейни Groove Coffee, переименуйте их, введя **Дверь Groove Coffee** в поле **Name** в области **Multiple Group Instances**.

**Примечание.** На стандартной **палитре свойств** невозможно переименовать несколько экземпляров группы одновременно. Это может быть очень удобно, если требуется переименовать несколько десятков или сотен экземпляров с одинаковым именем.

![](../../.gitbook/assets/11%20%286%29.png)

_**Примечание.**_ _Если указатель выходит за границы палитры, редактирование выбранного текстового поля становится невозможным. Это касается всех палитр, поэтому при редактировании любых объектов внутри палитры следует удерживать указатель в границах палитры._

3 - Если теперь выбрать стеклянную дверь Groove Coffee или другую стеклянную дверь и просмотреть их свойства на обычной **палитре свойств**, можно увидеть, что имя в поле **Группа** обновлено для каждого экземпляра. При этом значение по умолчанию свойства **Имя** экземпляра было обновлено только для дверей Groove Coffee.

![](../../.gitbook/assets/12%20%283%29.png)

4 - Наконец, посмотрите, как с помощью этого подключаемого модуля можно сортировать различные типы элементов.

1. Нарисуйте **линию \(L\)**, **прямоугольник \(R\)** и **куб \(ALT + B\)** в любом месте модели. Так как это временные фигуры, их точное расположение не имеет значения.
2. Откройте **палитру Properties Plus**, если она была закрыта, и нажмите клавиши **CRTL + A**, чтобы выбрать все видимые элементы модели.
3. Обратите внимание, что в области **Selection Count** элементы разделены на категории **Edges** \(линии\), **Faces**, **Bodies** \(3D-формы, состоящие из граней и ребер, такие как куб\)**,** **Groups** и т. п.

![](../../.gitbook/assets/13%20%283%29.png)

_**Примечание.**_ _Этот подключаемый модуль также определяет_ _**вершины**, которые можно создать с помощью подключаемого модуля_ _**Generate Vertex**. Для эксперимента можно установить_ _**подключаемый модуль Generate Vertex**_ _и повторить шаги, описанные выше._

## Plugin Playground

_Для любителей и профессиональных разработчиков в FormIt предусмотрен подключаемый модуль, который позволяет создавать и тестировать пользовательские подключаемые модули непосредственно в FormIt. Для использования всех возможностей этого инструмента необходимо знание HTML, CSS и JavaScript, поэтому мы не будем рассматривать его подробно. Чтобы узнать больше, посетите страницу_ [_**Building FormIt JavaScript Plugins**_](https://formit3d.github.io/FormItExamplePlugins/docs/HowToBuild.html)_._

1 - **Plugin Playground** устанавливается так же, как и предыдущие подключаемые модули — из **палитры «Подключаемые модули»**.

2 - Ниже приводится краткий обзор **Plugin Playground**.

1. Откройте **палитру Plugin Playground**, щелкнув значок _&lt;_карандаша_&gt;_.
2. На палитре нажмите кнопку **Edit**, чтобы открыть встроенный редактор кода для создания пользовательских подключаемых модулей. В Plugin Playground имеется готовый код подключаемого модуля, создающего куб.
3. Нажмите кнопку **воспроизведения** для тестового запуска текущего кода. В данном случае на палитре отобразится содержимое подключаемого модуля для создания куба.

![](../../.gitbook/assets/14%20%283%29.png)

