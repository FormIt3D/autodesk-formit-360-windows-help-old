# 2.7. Средства диагностики

2.7. Средства диагностики

FormIt содержит ряд полезных встроенных средств диагностики, позволяющих поддерживать чистоту и работоспособность моделей, включая проверку непроницаемости геометрии, поиск перевернутых граней и одновременный просмотр всех ограничивающих рамок группы.

_Эта глава посвящена поиску и исправлению некоторых ошибок в файле_ _**Encode Campus Sample Model.axm**. Если вы еще этого не сделали, данный файл можно скачать из_ _**набора данных к части II руководства FormIt Primer**._

_Дополнительную информацию о восстановлении моделей см. в публикации_ [_**Repairing Solid Models**_](https://formit.autodesk.com/blog/post/repairing-solid-models) _блога по FormIt._

## Выявление проблем с непроницаемостью

_Непроницаемая модель или группа — это твердотельный объект без зазоров, несвязанных ребер или других_ [_**неоднородных элементов геометрии**_](https://knowledge.autodesk.com/support/maya/learn-explore/caas/CloudHelp/cloudhelp/2016/ENU/Maya/files/GUID-8E97CEF7-1CFE-4838-B4B7-59F526E21AB2-htm.html)_. Проверка непроницаемости может быть важна для вычисления объемов, выполнения точного расчета инсоляции и энергопотребления, экспорта моделей в другие форматы файлов и подготовки моделей к 3D-печати или производству._

1 - После открытия файла **Encode Campus Sample Model.axm** измените видимость слоя, чтобы изолировать геометрию, непроницаемость которой требуется проверить.

1. Откройте **палитру слоев**.
2. Выберите все слои, щелкнув в любом месте списка слоев и нажав **CTRL + A**.
3. Щелкните один раз любой из флажков слоя, который в данный момент включен, и все слои будут отключены.
4. В поле ввода **Фильтр** в верхней части палитры слоев начните вводить **Exterior Masonry**, пока не увидите нужный слой.
5. Установите флажок для включения слоя **Encode Main Building — Exterior Masonry**.
6. На **плавающей панели навигации** нажмите кнопку **Показать все (ZA)**. Теперь видны только наружные кирпичные стены главного здания.

![](<../../.gitbook/assets/0 (18).png>)

![](<../../.gitbook/assets/1 (8).png>)

2 - Проверьте, есть ли проблемы с непроницаемостью.

1. Откройте **палитру «Визуальные стили»**.
2. Выберите вкладку **Диагностика модели** (значок гаечного ключа) в верхнем правом углу.
3. Установите флажок **Выявить проблемы с непроницаемостью**.
4. Любые проблемы с непроницаемостью выделяются красным цветом. В данном случае их две: одна наблюдается вдоль всей верхней грани стены, а другая представляет собой лишь небольшой участок, расположенный в оконной нише на заднем фасаде здания.
5. Перед устранением этих проблем выберите группу **Exterior Masonry** и откройте **палитру свойств**. Обратите внимание, что свойство **Объем** имеет значение **0 куб. футов**. Это говорит о том, что группа не является непроницаемой, вследствие чего ее объем не может быть рассчитан.

![](<../../.gitbook/assets/2 (16).png>)

_**Примечание.**_ _Красные отметки проблем с непроницаемостью видны через любой — прозрачный или непрозрачный — материал, что упрощает их поиск._

![](<../../.gitbook/assets/3 (5) (1).png>)

3 - После обнаружения проблем с непроницаемость можно попробовать их устранить. Начните с верхней грани стены.

1. Дважды щелкните группу **Exterior Masonry**, чтобы отредактировать ее, а затем увеличьте масштаб и выберите верхнюю грань стены. Обратите внимание, что на **палитре свойств** верхняя грань стены фактически представлена как отдельная группа. В FormIt непроницаемая геометрия должна представлять собой единую группу. Именно поэтому отображаются эти красные \*\*\*\*линии.
2. Чтобы устранить эту проблему, примените команду **Разгруппировать (U)** к выбранной грани, и красная линия в верхней части кирпичной стены должна исчезнуть.

![](../../.gitbook/assets/watertightness\_8\_fixed\_combined\_annotated.png)

_**Примечание.**_ _Если выбранная геометрия сгруппирована, это можно определить по синей пунктирной ограничивающей рамке вокруг нее. Несгруппированные грани и ребра не будут иметь этой рамки._

4 - Теперь попробуйте устранить другую небольшую проблему с непроницаемостью, которая все еще выделена красным цветом.

1. Масштабируйте и поворачивайте модель до тех пор, пока не увидите небольшой треугольный зазор. Это область проблемы с непроницаемостью.
2. В режиме редактирования группы с помощью инструмента **Линия (L)** проведите линию через одно из длинных ребер треугольного отверстия и дважды нажмите клавишу **ESC** для завершения работы с инструментом.

![](<../../.gitbook/assets/5 (9).png>)

_**Примечание.**_ _После построения одной линии программа FormIt автоматически создаст поверхность для заполнения треугольного зазора. Это происходит всегда при трассировке или формировании компланарной группы линий._

5 - Красные линии, свидетельствующие о наличии проблем с непроницаемостью, должны исчезнуть. В завершение удалите оставшееся лишнее ребро, а затем повторно проверьте объем группы.

1. Чтобы удалить лишнее ребро, попробуйте использовать инструмент **Объединить (MG)**. Этот инструмент позволяет объединить все компланарные поверхности и удалить все дополнительные ребра одним щелчком мыши. Для этого дважды щелкните кирпичную стену, чтобы выбрать все ее поверхности и ребра, щелкните правой кнопкой мыши, чтобы вызвать контекстное меню, и выберите пункт **Объединить (MG)**.
2. Нажмите клавишу **ESC** или **F**, чтобы завершить редактирование группы и выйти. Щелкните группу **Exterior Masonry**, чтобы выбрать ее снова, и повторно откройте **палитру свойств**, если она еще не открыта.
3. Группа стала непроницаемой, и FormIt может вычислить значение параметра **Объем** данной стены.

![](<../../.gitbook/assets/6 (10).png>)

_**Примечание.**_ _Инструмент_ _**Выявить проблемы с непроницаемостью** можно использовать не только для проверки тел на наличие проблем, но и для поиска несвязанных ребер в модели. Попробуйте сделать это самостоятельно._

6. Не забудьте отключить инструмент **Выявить проблемы с непроницаемостью** после завершения работы с ним. В противном случае все несвязанные ребра в модели будут выделены красным цветом.

## Выявление задних граней

_В FormIt при окрашивании поверхности с помощью материала он автоматически применяется к обеим сторонам. Однако другие программы для 3D-моделирования и рендеринга могут визуализировать поверхность иначе в зависимости от того, какая сторона видима: передняя или задняя. К счастью, FormIt позволяет легко проверить это._

1 - Рассмотрим существующий проект **NE Building**. Перейдите на **палитру «Сцены»** и дважды щелкните сцену **Default Visibility**, чтобы сбросить видимость слоя.

2 - Вместо использования слоев для редактирования дважды щелкните группу **NE Building**, а затем группу **Exterior Masonry**.

3 - Поворачивайте вид до тех пор, пока не увидите передний фасад здания, и включите параметр **Скрыть контекст группы (H)**, чтобы были видны только кирпичные стены. Далее проверьте, видимы ли задние грани.

1. Снова откройте **палитру «Визуальные стили»**.
2. Если кнопка **Диагностика модели** (значок гаечного ключа) еще не нажата, нажмите ее в верхнем правом углу.
3. Если установлен флажок **Выявить проблемы с непроницаемостью**, снимите его и установите другой флажок — **Выявить задние грани**.

![](<../../.gitbook/assets/7 (2).png>)

4 - Найдены 3 (три) задние грани, которые выделены цветом по умолчанию, но из-за сходства с материалом кирпича их трудно увидеть. Чтобы исправить это, можно включить режим **Монотонные поверхности**.

1. Чтобы отобразить параметры визуальных стилей поверхности, на **палитре «Визуальные стили»** нажмите кнопку **Поверхности** (значок твердотельного куба) в верхнем левом углу.
2. Установите флажок **Монотонные поверхности**. Теперь задние грани видны лучше.

![](<../../.gitbook/assets/8 (4).png>)

_**Примечание.**_ _Если флажок_ _**Задние грани**_ _и цвет на вкладке_ _**Поверхности**_ _(не путайте со средством диагностики_ _**Выявить задние грани**_ _) включены, пользователь может окрасить обе стороны грани с помощью различных материалов. Задние грани без назначенного материала будут окрашены в цвет, заданный в поле справа от флажка_ _**Задние грани**_ _. Этот режим активен по умолчанию при работе с геометрией, импортированной из программного обеспечения, которое при стандартных настройках позволяет применять различные материалы к противоположным сторонам граней \(например, SketchUp\)._

5 - Осталось развернуть задние грани, чтобы видеть только передние. Дважды щелкните группу **Exterior Masonry** для ее редактирования. С каждой из задних граней выполните следующие действия.

1. Увеличьте масштаб задней грани и щелкните ее правой кнопкой мыши, чтобы вызвать **контекстное меню**.
2. Выберите параметр **Обратить грань** или нажмите комбинацию клавиш **FF**.

![](<../../.gitbook/assets/9 (2).png>)

_**Примечание.**_ _Кроме того, можно при нажатой клавише_ _**CTRL**_ _или_ _**SHIFT**_ _щелкнуть каждую заднюю грань, чтобы выбрать все грани сразу, а затем развернуть их, нажав_ _**FF**._

6 - Не забудьте отключить оба параметра **Монотонные поверхности** и **Выявить задние грани**, чтобы снова отобразить обычные материалы.

## Отображение ограничивающих рамок группы

_Инструмент «Показать ограничивающие рамки группы» позволяет одновременно отобразить ограничивающие рамки всех групп модели, независимо от того, видим ли их слой в данный момент. Это позволяет быстро определить группы, границы которых намного больше, чем требуется, а также группы с различными ориентациями осей._

1 - Чтобы включить видимость всех ограничивающих рамок групп в модели, выполните следующие действия.

1. Откройте **палитру «Визуальные стили»**.
2. Нажмите кнопку **Диагностика модели** (значок гаечного ключа) в верхнем правом углу.
3. Установите флажок **Показать ограничивающие рамки группы** и снимите все остальные флажки.
4. Уменьшите масштаб с помощью колесика мыши или инструмента **Масштабировать (Z)** на **плавающей панели инструментов навигации**, пока в рабочей области не будут видны все ограничивающие рамки в виде пунктирных линий.
5. Даже если большинство слоев отключено, можно видеть слишком большую ограничивающую рамку одной из групп.

![](<../../.gitbook/assets/10 (4).png>)

_**Примечание.**_ _Некоторые ограничивающие рамки на этом виде расположены под разными углами. Ограничивающая рамка группы ориентирована вдоль оси данной группы, поэтому чтобы определить базовую ориентацию внутренней оси группы, достаточно посмотреть на ее ограничивающую рамку._

2 - Чтобы определить причину, по которой ограничивающая рамка имеет такой большой размер, включите все слои, используя готовую сцену, и попробуйте устранить проблему.

1. Откройте **палитру** **«Сцены»**.
2. Дважды щелкните сцену с именем **Default Visibility**, чтобы снова включить все основные слои.
3. В дальнем углу самой большой ограничивающей рамки можно видеть вертикальную линию. Дважды щелкните ее, чтобы отредактировать группу, в которой она находится, выберите линию и удалите ее. Выйдите из группы.

![](<../../.gitbook/assets/11 (4).png>)

3 - Ограничивающие рамки групп, размер которых значительно больше по сравнению с остальной геометрией модели, теперь отсутствуют.

![](<../../.gitbook/assets/12 (5).png>)
