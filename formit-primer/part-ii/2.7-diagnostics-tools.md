# 2.7 - 診断ツール

2.7 - 診断ツール

FormIt には、モデルをクリーンで正常な状態に保つための便利な組み込みモデル診断ツールがいくつか用意されています。たとえば、隙間のないジオメトリかどうかをチェックする、反転した面を特定する、すべてのグループ境界ボックスを同時に表示する、などが可能です。

_この章では、_ _**Encode Campus Sample Model.axm**に組み込まれているエラーを特定して修正します。まだダウンロードしていない場合は、_ _**FormIt Primer Part 2 Dataset**からファイルをダウンロードできます。_

_モデルの修復の詳細については、FormIt のブログ記事「_ [_**ソリッド モデルを修復する\(英語\)**_](https://formit.autodesk.com/blog/post/repairing-solid-models) _」を参照してください。_

## 密閉性に関する問題を特定する

_隙間のないモデルやグループは、ギャップや遊離したエッジなどの_ [_**非多様体ジオメトリ**_](https://knowledge.autodesk.com/ja/support/maya/learn-explore/caas/CloudHelp/cloudhelp/2016/JPN/Maya/files/GUID-8E97CEF7-1CFE-4838-B4B7-59F526E21AB2-htm.html)_を含まないソリッド オブジェクトです。密閉性のチェックは、体積の計算、正確な日照解析やエネルギー解析の実行、他のファイル形式へのモデルの書き出し、3D プリントや製造用のモデルの準備を行う場合に重要です。_

1 - **Encode Campus Sample Model.axm** を開き、レイヤの表示設定を調整して、密閉性をチェックするジオメトリのみを表示します。

1. **[レイヤ]パレット**を開きます。
2. レイヤのリスト内の任意の場所をクリックして**[Ctrl]+[A]**を押し、すべてのレイヤを選択します。
3. 現在オンになっているレイヤのチェックボックスをシングルクリックすると、すべてのレイヤがオフになります。
4. [レイヤ]パレットの上部近くの**[フィルタ]**入力ボックスで、「**Exterior Masonry**」と入力して目的のレイヤのみが表示されるようにします。
5. チェックボックスをクリックして、レイヤ **Encode Main Building – Exterior Masonry** をオンにします。
6. **浮動ナビゲーション バー**の**[全体表示(ZA)]**ボタンをクリックします。これで、メインの建物のレンガの外壁のみが表示されます。

![](<../../.gitbook/assets/0 (18).png>)

![](<../../.gitbook/assets/1 (8).png>)

2 - 次に、密閉性の問題がないかチェックします。

1. **[表示スタイル]パレット**を開きます。
2. 右上の**[モデル診断]**タブ(レンチのアイコン)を選択します。
3. **[密閉性に関する問題を特定]**の横にあるボックスをオンにします。
4. 密閉性の問題がある場合は赤色でハイライト表示されます。この例では 2 箇所あり、1 つは壁の上面全体に沿って、もう 1 つの小さな問題は建物の後部ファサードの窓の柱間にあります。
5. これらの問題に対処する前に、グループ **Exterior Masonry** を選択して**[プロパティ]パレット**を開きます。**[体積]**プロパティが「**0 cu ft**」であることに注目してください。これは、グループに隙間があり、その体積を計算できないためです。

![](<../../.gitbook/assets/2 (16).png>)

_**注:**_ _密閉性問題の赤色のハイライト表示は、モデルのマテリアルが不透明でも透明でも表示されるため、簡単に見つけることができます。_

![](<../../.gitbook/assets/3 (5) (1).png>)

3 - 密閉性の問題が見つかったので、対処します。まず、壁の上面から始めます。

1. グループ **Exterior Masonry** を編集するためにダブルクリックし、拡大表示して壁の上面を選択します。**[プロパティ]パレット**で、壁の上面が独自のグループであることに注目してください。FormIt では、隙間のないジオメトリは単一のグループで構成されている必要があるため、これらの赤い \*\*\*\* 線が表示されます。
2. この問題を解決するには、単に選択した面を**[グループ解除(U)]**します。こうすることで、レンガ壁上面の周囲の赤色の線が消えます。

![](../../.gitbook/assets/watertightness\_8\_fixed\_combined\_annotated.png)

_**注:**_ _また、選択したジオメトリの周囲に青色の点線の境界ボックスが表示されるため、グループ化されたジオメトリが選択されていることを簡単に確認できます。グループ解除された面とエッジには表示されません。_

4 - 次に、赤色でハイライト表示されているもう一方の小さな密閉性の問題を処理します。

1. 密閉性の問題のある領域の小さな三角形のギャップがはっきり見えるようになるまでモデルをズームおよび回転させます。
2. グループ編集モードのままで、**[線分(L)]**ツールを使用して三角形の穴の長い方のエッジ全体をトレースし、**[Esc]**を 2 回押して線分ツールを終了します。

![](<../../.gitbook/assets/5 (9).png>)

_**注:**_ _FormIt では、単一の線分を描画した後、三角形のギャップを埋めるサーフェスが自動的に作成されます。同一平面の線分のグループをトレースまたは完成させた場合は常に作成されます。_

5 - 密閉性の問題を示す赤色の線分が消えました。最後に、残っている不要なエッジを削除し、グループの体積をもう一度確認します。

1. 不要なエッジを削除するには、**[結合(MG)]**ツールを使用します。このツールでは、1 回のクリックで同一平面上のすべてのサーフェスが結合され、余分なエッジがすべて削除されます。これを行うには、レンガ壁をダブルクリックしてすべてのサーフェスとエッジを選択し、右クリックでコンテキスト メニューを表示して**[結合(MG)]**を選択します。
2. **[Esc]**または**[F]**を押してグループ編集を終了します。次に、グループ **Exterior Masonry** をクリックして再度選択し、開いていない場合は**[プロパティ]パレット**を開きます。
3. グループの隙間がなくなったため、FormIt は壁の**体積**を計算できます。

![](<../../.gitbook/assets/6 (10).png>)

_**注:**_ _ソリッドに問題がないか調べる際に_ _**[密閉性に関する問題を特定]**を使用すると、モデル内で遊離したエッジを見つけることができます。ぜひお試しください。_

6 - 完了したら、**[密閉性に関する問題を特定]**をオフにするのを忘れないでください。オンのままにすると、モデル内のすべての遊離したエッジが赤色にハイライト表示されます。

## 背面を識別する

_FormIt では、マテリアルでサーフェスをペイントすると、自動的に両側に適用されます。ただし、他の 3D モデリングおよびビジュアライゼーションのソフトウェアでは、「前面」と「背面」のどちら側が表示されているかによってレンダリングされるサーフェスが異なる場合があります。FormIt ではこれをチェックする簡単な方法が用意されています。_

1 - 既存の **NE Building** を確認します。**[シーン]パレット**に移動し、シーン **Default Visibility** をダブルクリックしてレイヤの表示設定をリセットします。

2 - 今回はレイヤを使用するのではなく、グループ **NE Building** をダブルクリックして編集し、もう一度グループ **Exterior Masonry** をダブルクリックして編集します。

3 - 建物の正面のファサードが表示されるまでビューをオービットし、**[グループ コンテキストを非表示(H)]**をオンにして、レンガの壁のみが表示されるようにします。背面が表示されているかどうかを次のようにチェックできます。

1. **[表示スタイル]パレット**を再度開きます。
2. まだ選択していない場合は、右上の**[モデル診断]**ボタン(レンチのアイコン)をクリックします。
3. まだの場合は**[密閉性に関する問題を特定]**チェックボックスをオフにし、代わりに**[背面を識別]**チェックボックスをオンにします。

![](<../../.gitbook/assets/7 (2).png>)

4 - FormIt の既定の「背面」の色でハイライト表示されている背面が 3 個ありますが、レンガのマテリアルと似ているため確認が困難です。これを修正するには、次のように**[単色のサーフェス]**をオンにします。

1. サーフェスの表示スタイルのオプションを表示するには、**[表示スタイル]パレット**で左上の**[サーフェス]**ボタン(ソリッドの立方体のアイコン)をクリックします。
2. **[単色のサーフェス]**の横にあるボックスをオンにします。これで、背面が見やすくなりました。

![](<../../.gitbook/assets/8 (4).png>)

_**注:**_ _[_ _**サーフェス**_ _]タブで_ _**[背面]**_ _チェックボックスをオンにして色を設定すると(_ _**[背面を識別]**_ _診断ツールと混同しないでください)、1 つの面の両側に異なるマテリアルでペイントできます。マテリアルが割り当てられていない背面は、_ _**[背面]**_ _チェックボックスの右側にあるボックスで設定されている色になります。これは、SketchUp のように、既定で 1 つの面の両側に異なるマテリアルを設定できるソフトウェアから読み込まれたジオメトリを使用する場合に、既定で有効になっています。_

5 - 残りの操作は、「背面」を反転させて前面のみが表示されるようにするだけです。グループ **Exterior** Masonry をダブルクリックして編集し、各背面で次の操作を行います。

1. 背面を拡大して右クリックすると、**コンテキスト メニュー**が表示されます。
2. **[面を反転(FF)]**を選択するか、キーボード ショートカットの **FF** を入力します。

![](<../../.gitbook/assets/9 (2).png>)

_**注**_ _:_ _**[Ctrl]**_ _または_ _**[Shift]**_ _を押しながら各背面をクリックしてすべて選択してから、_ _**[FF]**を押して一度にすべての面を反転させることもできます。_

6 - 必ず**[単色のサーフェス]**と**[背面を識別]**の両方をオフにして、通常のマテリアルの表示に戻してください。

## グループ境界ボックスを表示する

_このツールを使用すると、レイヤが現在表示されているかどうかに関係なく、モデル内のすべてのグループの境界ボックスを一度に表示できます。これにより、範囲が必要以上に大きいグループや、軸方向が異なるグループをすばやく特定できます。_

1 - モデル内のすべてのグループ境界ボックスを表示するには、次のように操作します。

1. **[表示スタイル]パレット**を開きます。
2. 右上の**[モデル診断]**ボタン(レンチのアイコン)を選択します。
3. **[グループ境界ボックスを表示]**チェックボックスをオンにし、他にオンになっているチェックボックスがあればすべてオフにします。
4. マウスのスクロール ホイールを使用するか、**浮動ナビゲーション ツールバー**の**[ズーム(Z)]**ツールをクリックして、キャンバス上に青い点線の境界ボックスがすべて表示されるまで縮小表示します。
5. ほとんどのレイヤがオフになっていても、グループの境界ボックスが必要以上に大きいことがわかります。

![](<../../.gitbook/assets/10 (4).png>)

_**注:**_ _このビューでは、一部の境界ボックスの角度が異なります。グループの境界ボックスはグループの軸に沿って方向付けられるため、境界ボックスを見ると、グループの内部軸の基本的な方向を簡単に判断できます。_

2 - 境界ボックスのサイズが非常に大きい原因を見つけるには、作成済みのシーンを使用して一部のレイヤをすべてオンにし、問題を修正します。

1. **[シーン]** **パレット**を開きます。
2. **Default Visibility** という名前のシーンをダブルクリックして、すべてのメイン レイヤをオンに戻します。
3. 最大の境界ボックスの片隅にある垂直な線分が表示されましたか? その線分が含まれるグループを編集するために線分をダブルクリックし、線分を選択して削除します。その後、そのグループを終了します。

![](<../../.gitbook/assets/11 (4).png>)

3 - すべてのグループの境界ボックスを確認すると、モデル ジオメトリと比較して必要以上に大きな境界ボックスはなくなりました。

![](<../../.gitbook/assets/12 (5).png>)
