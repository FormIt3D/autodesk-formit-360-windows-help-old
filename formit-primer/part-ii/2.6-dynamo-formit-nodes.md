# 2.6 – Nós do FormIt no Dynamo

_O FormIt vem com uma biblioteca de nós do Dynamo, que transferem a geometria entre o FormIt e o Dynamo. Nos capítulos anteriores, vimos como os objetos do Dynamo podem ser criados e ajustados de forma dinâmica no FormIt. Neste capítulo, vamos editar um gráfico fornecido no Dynamo para criar uma versão modificada do gráfico de escada pronto para uso._

_Neste capítulo, usaremos o modelo_ _**Encode Campus Sample Model.axm**_ _e_ _o script do Dynamo_ _**Stairs by Top Edge.dyn**_ _. Se você ainda não tiver esses arquivos, poderá encontrá-los e fazer download no_ _**Conjunto de dados da Parte 2 do Manual do FormIt**._

_Se você não estiver familiarizado com o uso do Dynamo no FormIt, recomendamos consultar o capítulo_ _**1.10 –**_ _**Grupos de cálculos com o Dynamo**_ _na_ _**Parte I**_ _deste manual. Embora esse capítulo envolva a edição de gráficos do Dynamo, abordaremos apenas os elementos do Dynamo, pois eles se relacionam com nós específicos do FormIt. Se você não estiver familiarizado com o Dynamo, pode saber mais consultando o_ [_**Manual do Dynamo:**_](https://primer.dynamobim.org/pt-br/01_Introduction/1-2_what_is_dynamo.html)_**.**_

_**Para esta seção, é necessário ter o FormIt para Windows 2022.0 ou versão mais recente.**_

## **Adicionar uma localização da biblioteca do Dynamo**

_Embora o FormIt venha com uma biblioteca de gráficos prontos para uso na pasta **Amostras do Dynamo**, precisamos de um local para criar e salvar nossos próprios gráficos personalizados. Para isso, primeiro vamos adicionar uma nova pasta às **Localizações da biblioteca do Dynamo** no FormIt. Isso é semelhante a adicionar uma pasta à biblioteca de conteúdos do FormIt; portanto, se você precisar recapitular, confira o capítulo **1.11 – Importar modelos com a biblioteca de conteúdos** na Parte I do Manual._

1 – Para adicionar uma nova **localização da biblioteca do Dynamo**:

1. Com o arquivo **Encode Campus Sample Model.axm** aberto, vá para a **paleta do Dynamo**.
2. Clique no botão **Vincular diretório do Dynamo** no canto superior esquerdo.
3. A janela **Preferências** abre, com a guia **Dynamo** selecionada automaticamente. Clique no ícone de “mais” para **Adicionar uma nova localização da biblioteca do Dynamo**. 
4. Navegue para onde você fez o download do **Conjunto de dados de modelos de codificação** e selecione a pasta **Arquivos de suporte** &gt; **Gráficos do Manual do FormIt**.
5. Clique em **Selecionar pasta** e, em seguida, em **OK**. Você será direcionado novamente para o FormIt.
6. No menu suspenso de pastas, na parte superior da **paleta do Dynamo**, selecione a pasta **Gráficos do Manual do FormIt**, que acabamos de adicionar.

![](../../.gitbook/assets/0%20%2821%29.png)

## **Nó** **SendToFormIt**

_Para que qualquer gráfico do Dynamo funcione com o FormIt, é necessário que tenha pelo menos um nó __**SendToFormIt**__._

1 – Vamos começar tentando usar o gráfico **Escada por aresta superior** tal como está, na pasta que acabamos de adicionar.

1. Comece indo para a cena Seção – Longitudinal.

2 – Vamos adicionar o nó **SendToFormIt** ao gráfico. Para isso, vamos usar a opção “Editar gráfico de origem” em um novo modelo do FormIt, para não “poluir” o modelo de trabalho com as alterações de criação de gráficos.

1. Clique com o botão direito do mouse no **ícone do FormIt**, na barra de tarefas, e selecione **FormIt** para iniciar uma nova janela do FormIt vazia \(ou simplesmente clique com o botão do meio do mouse no ícone do FormIt\).
2. Na **paleta do Dynamo**, localize a miniatura **Escadas por aresta superior** e clique na seta pequena do menu suspenso no lado direito da miniatura ou clique com o botão direito do mouse na miniatura.
3. Selecione **Editar gráfico de origem**. Isso iniciará o Dynamo automaticamente e abrirá o gráfico que queremos editar.

![](../../.gitbook/assets/2%20%2822%29.png)

2 – Depois que o Dynamo e o gráfico forem abertos, amplie a área mostrada abaixo, que contém os grupos em verde e em roxo na extremidade do lado direito.

![](../../.gitbook/assets/3%20%2819%29.png)

_**Observação:**_ _Os gráficos do Dynamo fluem da esquerda para a direita; portanto, normalmente você encontra os nós de saída no canto direito do gráfico._

3 – Agora, precisamos adicionar um nó **SendToFormIt** para enviar a geometria de escada que você vê no plano de fundo para o nosso modelo do FormIt:

1. Na área Complementos \(pacotes\) à esquerda, expanda o menu suspenso do **FormIt** e clique em **SendToFormIt**. Um nó **SendToFormIt** aparecerá no centro da tela.
2. Adicione o novo nó ao grupo roxo **Enviar a geometria de escada para o FormIt**, selecionando o grupo roxo e o novo nó **SendToFormIt**. Em seguida, clique com o botão direito do mouse no nó **SendToFormIt** e selecione a opção **Adicionar ao grupo**. Mova o novo nó para uma localização semelhante àquela mostrada na imagem abaixo.
3. Clique com o botão direito do mouse no nó **SendToFormIt** e verifique se a opção **É saída** está marcada. Essa opção deve estar marcada por padrão, mas se não estiver, nenhuma geometria será enviada para o FormIt.
4. Renomeie o nó **SendToFormIt** como **SendToFormIt.Stairs**.
5. Conecte as duas \(2\) entradas do novo nó **SendToFormIt.Stairs**, como mostrado na imagem abaixo.

![](../../.gitbook/assets/4%20%2818%29.png)

_**Observação:**_ _Apesar de estarmos usando somente o nó de opções_ _**SetAsMesh**_ _, que determina se a geometria é enviada para o FormIt como um objeto ou como uma malha,_ _existem alguns nós_ _**FormItGroupOptions**_ _disponíveis. Cada um controla várias propriedades da geometria enviada para o FormIt; aproveite para experimentar com alguns dos outros nós._

4 – Vamos voltar ao FormIt e conferir se funcionou:

1. Salve e feche o Dynamo. O gráfico atualizado será automaticamente recarregado no FormIt.
2. Volte para a janela do FormIt com o **Arquivo de amostras do campus de codificação** e, na **paleta do Dynamo**, clique novamente em **Escada por aresta superior**.
3. Coloque a escada no modelo, de forma semelhante ao que é mostrado na imagem abaixo.
4. Selecione a escada e observe que o nome do grupo coincide com o nome do gráfico do Dynamo.
5. Agora, clique duas vezes para editar o grupo e selecione o grupo aninhado de geometria de escada. Observe que o nome desse grupo coincide com o nome que demos ao nó no Dynamo.

![](../../.gitbook/assets/5%20%2817%29.png)

_**Observação:**_ _Não se preocupe com a localização exata da escada. Vamos fazer o ajuste preciso na próxima seção._

![](../../.gitbook/assets/6%20%2814%29.png)

_**Observação:**_ _Neste caso, só precisamos de um nó __**SendToFormIt**__, mas é possível criar vários. Cada um vai criar um novo grupo no FormIt, com base no nome do nó __**SendToFormIt**__ de onde veio._

## **Nós SelectFromFormIt**

_Como vimos nos capítulos anteriores, os gráficos do Dynamo podem solicitar que o usuário selecione uma geometria específica, que será usada pelo gráfico. Agora, vamos adicionar dois \(2\) desses nós ao gráfico de escada, para que a orientação, a largura e a altura da escada possam ser calculadas com base na geometria selecionada do FormIt, no Dynamo._

1 – Exclua a escada que acabamos de posicionar.

2 – Volte para a janela vazia do FormIt.

3 – Na **paleta do Dynamo**, clique no menu suspenso da miniatura **Escadas por aresta superior** e selecione **Editar gráfico de origem** para ser aberto no Dynamo novamente.

_**Observação:**_ _Ao editar um gráfico do Dynamo diretamente na_ _**paleta Propriedades**_ _clicando em_ _**Editar gráfico incorporado**_ _\(em vez de usar a_ _**paleta do Dynamo**\), você estará editando o gráfico incorporado somente para esse grupo e não o gráfico de origem salvo na pasta que nós adicionamos anteriormente à biblioteca do Dynamo do FormIt._

4 – Desta vez, queremos adicionar alguns nós de seleção, que normalmente estão localizados perto do lado esquerdo ou do início do gráfico. Aplique zoom na área mostrada abaixo.

![](../../.gitbook/assets/7%20%289%29.png)

5 –Para adicionar os novos nós de seleção:

1. Na área **Complementos**, expanda o **FormIt** e clique em **SelectFromFormIt** duas vezes, o que deve criar dois \(2\) novos nós no centro da tela.
2. Organize-os um acima do outro, como mostrado na imagem abaixo, crie um grupo cor de laranja para eles e nomeie-o como **Geometria selecionada do FormIt**. A ordem na qual o usuário é solicitado a selecionar elementos no FormIt baseia-se no posicionamento vertical dos nós de seleção no Dynamo; o nó superior será exibido primeiro e o inferior será exibido por último.
3. Renomeie o nó superior como **Selecionar aresta superior** e o nó inferior como **Selecionar piso inferior**. Quando esse gráfico é executado no FormIt, um Assistente de seleção do Dynamo será exibido e usará os nomes desses nós como prompts para a geometria a ser selecionada.
4. Clique com o botão direito do mouse em cada nó e certifique-se de que a opção **É entrada** esteja marcada. Essa opção deve estar marcada por padrão, mas se não estiver, esses nós não serão reconhecidos pelo FormIt.
5. Conecte os novos nós de seleção, como mostrado na imagem abaixo. Cada um deles tem apenas uma \(1\) conexão.

![](../../.gitbook/assets/8%20%2811%29.png)

_**Observação:**_ _Os novos nós podem ter avisos, fazendo com que fiquem amarelos, conforme exibido acima. Você pode ignorá-los por enquanto. Os avisos são porque os nós estão esperando a geometria do FormIt, mas ainda não receberam \(porque acabaram de ser adicionados\)._

6 – Agora, precisamos fazer mais algumas alterações no gráfico, para que as escadas sejam criadas com base na geometria dos nós de seleção. Primeiro, precisamos alterar as entradas **Altura de piso a piso** e **Largura da escada**, para que os valores provenham da geometria selecionada e não dos controles deslizantes das entradas:

1. Enquanto mantém pressionada a tecla **Shift**, clique na saída do nó **Altura de piso a piso**, no grupo laranja **Entradas dos controles deslizantes**, e mova esses fios para a saída do nó **Altura calculada de piso a piso**, logo acima.
2. Usando a mesma técnica, mova os fios de saída da opção **Largura da escada**, no grupo laranja **Entradas dos controles deslizantes**, para a saída do nó **Altura calculada de piso a piso**, acima.
3. Exclua os nós antigos **Altura de piso a piso** e **Largura da escada**, já que não precisaremos mais deles.

![](../../.gitbook/assets/9%20%288%29.png)

_**Observação:**_ _Se você quiser adicionar qualquer_ _Nó de entrada do Dynamo ao gráfico, é muito semelhante a adicionar os nós_ _**SelectFromFormIt**_ _. Apenas garanta que eles estejam marcados como_ _**É entrada**, renomeie-os e reorganize-os da forma como você quer que eles sejam exibidos no FormIt. Eles aparecerão na_ _**paleta Propriedades** do FormIt._

7 – Por fim, aumente o zoom na extremidade direita do gráfico, onde adicionamos o nó **SendToFormIt.Stairs** anteriormente. Desejamos alternar esse nó de saída para usar a geometria de escada que foi movida e rotacionada com base na geometria selecionada na localização do FormIt. Basta alternar a conexão do grupo **Geometria de escada** para o grupo **Geometria de escada rotacionada e convertida**.

![](../../.gitbook/assets/10%20%288%29.png)

## **Usar o gráfico**

1 – Agora que adicionamos os nós de seleção e de consolidação, o gráfico está pronto. Salve e feche o Dynamo e, em seguida, volte para a janela do FormIt com o arquivo **Encode Campus Sample Model.axm** e faça um teste:

1. Assegure-se de que você ainda esteja na cena **Seção – Longitudinal** e, em seguida, desenhe uma linha de 6’ ao longo da aresta direita da abertura da escada do primeiro piso. Isso definirá a largura e o ângulo da escada.
2. Na **paleta do Dynamo**, clique na miniatura **Escadas por aresta superior**, para iniciar o gráfico.
3. Um Assistente de seleção do Dynamo será exibido e instruirá você a fazer a primeira seleção usando o nome que atribuímos ao nó de seleção anteriormente: **Selecionar aresta superior**. Depois de selecionar a aresta que acabamos de desenhar, clique na seta para a frente no Assistente de seleção do Dynamo.
4. O próximo prompt será o nome do outro nó de seleção: **Selecionar piso inferior**. Selecione a laje do piso térreo do edifício de codificação principal e, em seguida, clique na marca de seleção.
5. Após a escada ter sido criada, observe que na **paleta Propriedades** existe agora a opção de selecionar novamente a geometria para qualquer um dos nós de seleção. Observe também que os controles deslizantes correspondentes aos nós de entrada que excluímos, **Altura de piso a piso** e **Largura da escada**, não estão mais presentes; agora, eles são calculados com base na geometria selecionada.

![](../../.gitbook/assets/11%20%288%29.png)

_**Observação:** Se você alterar a posição da aresta superior ou da altura do piso inferior e executar o gráfico novamente, as escadas serão atualizadas em conformidade. Normalmente, é recomendável evitar mover manualmente qualquer geometria gerada pelo Dynamo que depende das seleções do FormIt, pois isso pode alterar a relação com a geometria selecionada usada para criá-la. Às vezes, agrupar o grupo do Dynamo e a geometria de seleção ajuda a mantê-los conectados e a evitar problemas._

2 – Para concluir, adicione seus próprios toques de criatividade. Fizemos o seguinte, usando diversas ferramentas descritas em capítulos anteriores:

1. Foi criada uma escada entre cada piso.
2. A aresta superior da escada inferior foi levemente rotacionada para criar uma escada ligeiramente diagonal para o piso térreo.
3. Alguns controles deslizantes de entrada foram ligeiramente ajustados para cada escada, de modo a obter as configurações desejadas.
4. O gráfico do Dynamo **Corrimão ao longo do caminho** foi usado para criar patamares em torno das aberturas da escada.
5. Foi adicionado um banzo central em cada escada com o recurso **Varredura**.
6. Todas as escadas, sequências e corrimões foram posicionados em uma nova camada denominada **Codificar edifício principal – Escadas**.

![Escadas terminadas, vistas na seção.](../../.gitbook/assets/12%20%287%29.png)

![Escadas terminadas, tal como são visíveis na cena Nível dos olhos &#x2013; Praça.](../../.gitbook/assets/13%20%287%29.png)



