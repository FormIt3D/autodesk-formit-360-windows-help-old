# 2.6 – Dynamo-FormIt-Blöcke

_FormIt wird mit einer Bibliothek von Dynamo-Blöcken geliefert, über die Geometrie zwischen FormIt und Dynamo übertragen wird. In den vorherigen Kapiteln haben Sie gesehen, wie Dynamo-Objekte in FormIt erstellt und dynamisch angepasst werden können. In diesem Kapitel bearbeiten Sie ein bereitgestelltes Dynamo-Diagramm, um eine geänderte Version des OOTB-Treppendiagramms zu erstellen._

_In diesem Kapitel verwenden Sie sowohl das Modell_ _**Encode Campus Sample Model.axm**_ _als auch_ _das Dynamo-Skript_ _**Stairs by Top Edge.dyn**_ _. Wenn Sie dies nicht bereits getan haben, können Sie die beiden Dateien aus dem Ordner_ _**FormIt Primer Part 2 Dataset** herunterladen._

_Wenn Sie Dynamo noch nicht in FormIt verwendet haben, empfehlen wir Ihnen, das Kapitel_ _**1.10 –**_ _**Durch Computational Design erstellte Gruppen aus Dynamo**_ _in_ _**Teil I**_ _dieser Einführung zu lesen. In diesem Kapitel werden zwar Dynamo-Diagramme bearbeitet, es werden jedoch nur Elemente von Dynamo behandelt, die sich auf FormIt-spezifische Blöcke beziehen. Wenn Sie Dynamo noch nicht verwendet haben, erhalten Sie weitere Informationen in der_ [_**Dynamo-Einführung**_](https://primer.dynamobim.org/de/01_Introduction/1-2_what_is_dynamo.html)_**.**_

_**Für diesen Abschnitt benötigen Sie FormIt for Windows 2022.0 oder höher.**_

## **Hinzufügen eines Speicherorts für Dynamo-Bibliotheken**

_Im Lieferumfang von FormIt im Ordner **Dynamo-Beispiele** ist eine Bibliothek mit OOTB-Diagrammen enthalten. Sie benötigen jedoch einen Ort, an dem Sie Ihre eigenen Diagramme erstellen und speichern können. Dazu fügen Sie zunächst einen neuen Ordner zu den **Dynamo-Bibliotheksspeicherorten** in FormIt hinzu. Dies ähnelt dem Hinzufügen eines Ordners zur Inhaltsbibliothek von FormIt. Wenn Sie eine Auffrischung Ihrer Kenntnisse benötigen, sehen Sie sich das Kapitel **1.11 – Importieren von Modellen mit der Inhaltsbibliothek** in der Einführung, Teil I, an._

1 – So fügen Sie einen neuen **Speicherort für Dynamo-Bibliotheken** hinzu

1. Navigieren Sie bei geöffneter Datei **Encode Campus Sample Model.axm** zur **Dynamo-Palette**.
2. Klicken Sie auf die Schaltfläche **Dynamo-Verzeichnis verknüpfen** in der oberen linken Ecke.
3. Das Fenster **Voreinstellungen** wird geöffnet, und die Registerkarte **Dynamo** wird automatisch ausgewählt. Klicken Sie auf das Plus-Symbol **Neuen Speicherort für Dynamo-Bibliotheken hinzufügen**.
4. Navigieren Sie zum Speicherort der heruntergeladenen Datei **Encode Model Data Set**, und wählen Sie den Ordner **Supporting Files** &gt; **FormIt Primer Graphs** aus.
5. Klicken Sie auf **Ordner auswählen** und dann auf **OK**. Damit werden Sie wieder zu FormIt zurückgeleitet.
6. Wählen Sie in der Ordner-Dropdown-Liste oben in der **Dynamo-Palette** den Ordner **FormIt Primer Graphs** aus, den Sie gerade hinzugefügt haben.

![](../../.gitbook/assets/0%20%2821%29.png)

## **SendToFormIt**-**Block**

_Damit ein Dynamo-Diagramm mit FormIt verwendet werden kann, muss es mindestens einen_ _**SendToFormIt**_-_Block aufweisen._

1 – Versuchen Sie zunächst, das Diagramm **Stair by Top Edge** aus dem gerade hinzugefügten Ordner unverändert zu verwenden.

1. Wechseln Sie zunächst zur Szene Section – Longitudinal.

2 – Fügen Sie den **SendToFormIt**-Block dem Diagramm hinzu. Dazu verwenden Sie Quelldiagramm bearbeiten in einem neuen FormIt-Modell, damit das Arbeitsmodell nicht durch die Diagrammerstellungsänderungen beeinträchtigt wird.

1. Klicken Sie mit der rechten Maustaste auf das **FormIt-Symbol** in der Aufgabenleiste, und wählen Sie **FormIt** aus, um ein neues leeres FormIt-Fenster zu öffnen \(oder klicken Sie einfach mit der mittleren Maustaste auf das FormIt-Symbol\).
2. Suchen Sie in der **Dynamo-Palette** die Kachel **Stairs by Top Edge**, und klicken Sie auf den kleinen Dropdown-Pfeil an der rechten Kante der Kachel, oder klicken Sie mit der rechten Maustaste auf die Kachel.
3. Wählen Sie **Quelldiagramm bearbeiten** aus. Dadurch wird Dynamo automatisch gestartet und das zu bearbeitende Diagramm geöffnet.

![](../../.gitbook/assets/2%20%2822%29.png)

2 – Nachdem Dynamo und das Diagramm geöffnet wurden, vergrößern Sie den unten gezeigten Bereich, der die grüne und violette Gruppe ganz rechts enthält.

![](../../.gitbook/assets/3%20%2819%29.png)

_**Anmerkung:**_ _Dynamo-Diagramme verlaufen von links nach rechts. Daher befinden sich die Ausgabeblöcke normalerweise auf der rechten Seite des Diagramms._

3 – Jetzt müssen Sie einen **SendToFormIt**-Block hinzufügen, um die Treppengeometrie, die Sie im Hintergrund sehen, in das FormIt-Modell zu übertragen:

1. Erweitern Sie im Bereich Add-ons \(Pakete\) auf der linken Seite die Dropdown-Liste **FormIt**, und klicken Sie auf **SendToFormIt**. Ein **SendToFormIt**-Block wird in der Mitte des Bildschirms angezeigt.
2. Fügen Sie den neuen Block der violetten Gruppe **Treppengeometrie an FormIt senden** hinzu, indem Sie sowohl die violette Gruppe als auch den neuen **SendToFormIt**-Block auswählen, mit der rechten Maustaste auf den **SendToFormIt**-Block klicken und **Zu Gruppe hinzufügen** auswählen. Verschieben Sie den neuen Block an eine Position, die der in der folgenden Abbildung ähnelt.
3. Klicken Sie mit der rechten Maustaste auf den **SendToFormIt**-Block, und stellen Sie sicher, dass **Ist Ausgabe** aktiviert ist. Dies sollte vorgabemäßig der Fall sein. Bei deaktivierter Option wird keine Geometrie an FormIt gesendet.
4. Benennen Sie den **SendToFormIt**-Block in **SendToFormIt.Stairs** um.
5. Verbinden Sie die beiden \(2\) Eingaben des neuen **SendToFormIt.Stairs**-Blocks, wie in der folgenden Abbildung gezeigt.

![](../../.gitbook/assets/4%20%2818%29.png)

_**Anmerkung:**_ _Obwohl nur der_ _**SetAsMesh**_-_Optionsblock verwendet wird, der bestimmt, ob die Geometrie als Objekt oder als Netz an FormIt gesendet wird,_ _stehen mehrere_ _**FormItGroupOptions**_-_Blöcke zur Verfügung. Jeder Block steuert verschiedene Eigenschaften der an FormIt gesendeten Geometrie. Sie können auch mit anderen Blöcken experimentieren._

4 – Kehren Sie zu FormIt zurück und sehen Sie sich an, ob es funktioniert hat:

1. Speichern Sie, und schließen Sie dann Dynamo. Das aktualisierte Diagramm wird automatisch wieder in FormIt geladen.
2. Wechseln Sie zurück zum FormIt-Fenster mit der **Encode Campus Sample File**, und klicken Sie in der **Dynamo-Palette** erneut auf **Stair by Top Edge**.
3. Platzieren Sie die Treppe im Modell, ähnlich wie in der folgenden Abbildung dargestellt.
4. Wählen Sie die Treppe aus. Der Gruppenname entspricht dem Namen des Dynamo-Diagramms.
5. Doppelklicken Sie nun, um die Gruppe zu bearbeiten, und wählen Sie die verschachtelte Treppengeometriegruppe aus. Beachten Sie, dass der Name dieser Gruppe dem Namen entspricht, den Sie dem Block in Dynamo gegeben haben.

![](../../.gitbook/assets/5%20%2817%29.png)

_**Anmerkung:**_ _Machen Sie sich keine Gedanken über die genaue Position der Treppe. Diese wird im folgenden Abschnitt genauer bestimmt._

![](../../.gitbook/assets/6%20%2814%29.png)

_**Anmerkung:**_ _In diesem Fall wurde nur ein_ _**SendToFormIt**_-_Block benötigt. Sie können jedoch mehrere erstellen. Für jeden Block wird eine neue Gruppe in FormIt erstellt, die auf dem Namen des __**SendToFormIt**_-_Blocks basiert, aus dem diese stammt._

## **SelectFromFormIt-Blöcke**

_Wie in den vorherigen Kapiteln gezeigt, können Dynamo-Diagramme den Benutzer auffordern, eine bestimmte Geometrie auszuwählen, die dann vom Diagramm verwendet wird. Nun fügen Sie zwei \(2\) dieser Blöcke zu Ihrem Treppendiagramm hinzu, sodass die Treppenausrichtung, -breite und -höhe aus der ausgewählten FormIt-Geometrie in Dynamo berechnet werden kann._

1 – Löschen Sie die soeben platzierte Treppe.

2 – Wechseln Sie zurück zum leeren FormIt-Fenster.

3 – Klicken Sie in der **Dynamo-Palette** auf die Dropdown-Liste für die Kachel **Stairs by Top Edge**, und wählen Sie **Quelldiagramm bearbeiten** aus. Die Kachel wird dann wieder in Dynamo geöffnet.

_**Anmerkung:**_ _Wenn Sie ein Dynamo-Diagramm direkt über die_ _**Eigenschaftenpalette**_ _bearbeiten, indem Sie auf_ _**Eingebettetes Diagramm bearbeiten**_ _\(statt auf die_ _**Dynamo Palette**\) klicken, bearbeiten Sie nur das eingebettete Diagramm für diese Gruppe und nicht das Quelldiagramm, das in dem Ordner gespeichert wurde, den Sie zuvor zur Dynamo-Bibliothek von FormIt hinzugefügt haben._

4 – Diesmal fügen Sie einige Auswahlblöcke hinzu, die sich häufig in der Nähe des Anfangs oder der linken Seite des Diagramms befinden. Vergrößern Sie den unten angezeigten Bereich.

![](../../.gitbook/assets/7%20%289%29.png)

5 – So fügen Sie die neuen Auswahlblöcke hinzu

1. Erweitern Sie im Bereich **Add-ons** die Option **FormIt**, und klicken Sie zweimal auf **SelectFromFormIt**. Dadurch werden zwei \(2\) neue Blöcke in der Mitte des Bildschirms erstellt.
2. Ordnen Sie sie übereinander an, wie in der folgenden Abbildung gezeigt, erstellen Sie eine orangefarbene Gruppe für sie, und nennen Sie sie **Geometry Selected from FormIt**. Die Reihenfolge, in der der Benutzer zur Auswahl von Elementen in FormIt aufgefordert wird, basiert auf der vertikalen Positionierung der Auswahlblöcke in Dynamo. Der oberste Block wird zuerst und der untere zuletzt angezeigt.
3. Benennen Sie den oberen Block in **Select Top Edge** und den unteren Block in **Select Bottom Floor** um. Wenn dieses Diagramm in FormIt ausgeführt wird, wird ein Dynamo-Auswahlassistent angezeigt, der die Namen dieser Blöcke als Eingabeaufforderung für die auszuwählende Geometrie verwendet.
4. Klicken Sie mit der rechten Maustaste auf die einzelnen Blöcke, und stellen Sie sicher, dass **Ist Eingabe** aktiviert ist. Dies sollte vorgabemäßig der Fall sein. Bei deaktivierter Option werden diese Blöcke nicht von FormIt erkannt.
5. Verbinden Sie die neuen Auswahlblöcke wie in der folgenden Abbildung gezeigt. Sie haben jeweils nur eine \(1\) Verbindung.

![](../../.gitbook/assets/8%20%2811%29.png)

_**Anmerkung:**_ _Die neuen Blöcke enthalten möglicherweise Warnungen, sodass sie wie oben dargestellt gelb angezeigt werden. Sie können diese zunächst ignorieren. Die Warnungen werden angezeigt, weil für die Blöcke Geometrie aus FormIt erwartet wird, diese aber noch nicht verfügbar ist \(weil Sie sie gerade erst hinzugefügt haben\)._

6 – Jetzt müssen Sie einige weitere Änderungen am Diagramm vornehmen, sodass die Treppen aus der Geometrie der Auswahlblöcke erstellt werden. Zunächst müssen Sie die Eingaben für die **Geschosshöhe** und die **Treppenbreite** ändern, sodass die Werte aus der ausgewählten Geometrie anstatt von den Eingabe-Schiebereglern abgerufen werden:

1. Klicken Sie bei gedrückter **UMSCHALTTASTE** auf die Ausgabe des Blocks für die **Geschosshöhe** innerhalb der orangefarbenen Gruppe für die **Schieberegler-Eingaben**, und ziehen Sie diese Linien zur Ausgabe des Blocks für die **berechnete Geschosshöhe** direkt darüber.
2. Ziehen Sie auf dieselbe Weise die Ausgabelinien von der **Treppenbreite** in der orangefarbenen Gruppe für die **Schieberegler-Eingaben** zur Ausgabe des Blocks für die **berechnete Geschosshöhe** oben.
3. Löschen Sie die alten Blöcke für die **Geschosshöhe** und **Treppenbreite**, da sie nicht mehr benötigt werden.

![](../../.gitbook/assets/9%20%288%29.png)

_**Anmerkung:**_ _Wenn Sie Ihrem Diagramm_ _Dynamo-Eingabeblöcke hinzufügen möchten, ist die Vorgehensweise ähnlich wie beim Hinzufügen der_ _**SelectFromFormIt**_-_Blöcke. Stellen Sie einfach sicher, dass sie als_ _**Ist Eingabe** markiert sind, benennen Sie sie um, und ordnen Sie sie in der Reihenfolge an, in der sie in FormIt angezeigt werden sollen. Sie werden dann in der_ _**Eigenschaftenpalette** von FormIt angezeigt._

7 – Vergrößern Sie schließlich das rechte Ende des Diagramms, wo Sie zuvor den **SendToFormIt.Stairs**-Block hinzugefügt haben. Für diesen Ausgabeblock soll nun die Treppengeometrie verwendet werden, die auf Basis der ausgewählten Geometrie an der FormIt-Position verschoben und gedreht wurde. Wechseln Sie die Verbindung einfach von der Gruppe für die **Treppengeometrie** zur Gruppe für die **gedrehte und verschobene Treppengeometrie**.

![](../../.gitbook/assets/10%20%288%29.png)

## **Verwenden des Diagramms**

1 – Nachdem Sie nun sowohl Auswahl- als auch Einbackblöcke hinzugefügt haben, ist das Diagramm bereit. Speichern Sie, und schließen Sie Dynamo, wechseln Sie anschließend zurück zum FormIt-Fenster mit der Datei **Encode Campus Sample Model.axm**, und testen Sie die Datei, indem Sie folgende Schritte durchführen:

1. Vergewissern Sie sich, dass Sie sich noch in der Szene **Section – Longitudinal** befinden, und zeichnen Sie dann eine Linie von 6' entlang der rechten Kante der Treppenöffnung im ersten Stock. Dadurch werden Breite und Winkel der Treppe definiert.
2. Klicken Sie in der **Dynamo-Palette** auf die Kachel **Stairs by Top Edge**, um das Diagramm zu starten.
3. Ein Dynamo-Auswahlassistent wird angezeigt, in dem Sie aufgefordert werden, die erste Auswahl unter Verwendung des Namens vorzunehmen, den Sie diesem Auswahlblock zuvor gegeben haben: **Select Top Edge**. Nachdem Sie die gerade gezeichnete Kante ausgewählt haben, klicken Sie im Dynamo-Auswahlassistenten auf den Vorwärtspfeil.
4. Als Nächstes werden Sie zur Eingabe des Namens des anderen Auswahlblocks, **Select Bottom Floor**, aufgefordert. Wählen Sie die Erdgeschossdeckenplatte des Encode-Hauptgebäudes aus, und klicken Sie dann auf das Häkchen.
5. Nachdem die Treppe erstellt wurde, können Sie in der **Eigenschaftenpalette** die Geometrie für die beiden Auswahlblöcke erneut auswählen. Beachten Sie auch, dass die Schieberegler der gelöschten Eingabeblöcke für die **Geschosshöhe** und die **Treppenbreite** nicht mehr vorhanden sind. Sie werden jetzt anhand der ausgewählten Geometrie berechnet.

![](../../.gitbook/assets/11%20%288%29.png)

_**Anmerkung:** Wenn Sie entweder die Position der oberen Kante oder die Höhe des Untergeschosses ändern und das Diagramm erneut ausführen, werden die Treppen entsprechend aktualisiert. Normalerweise empfiehlt es sich, das manuelle Verschieben von in Dynamo generierter Geometrie zu vermeiden, die von FormIt-Auswahlen abhängt, da dies ihre Beziehung zur ausgewählten Geometrie, die zum Erstellen der Geometrie verwendet wurde, verändern kann. In einigen Fällen können Sie die Dynamo-Gruppe und die Auswahlgeometrie gruppieren, um die Verbindung zu erhalten und Probleme zu vermeiden._

2 – Zum Schluss können Sie Ihre eigenen Ideen einbringen. Sie haben mithilfe verschiedener Werkzeuge, die in den vorherigen Kapiteln behandelt wurden, Folgendes durchgeführt:

1. Erstellen einer Treppe zwischen den Geschossen
2. Geringfügiges Drehen der oberen Kante der unteren Treppe, um eine leicht diagonale Treppe zum Erdgeschoss zu erstellen
3. Geringfügiges Anpassen einiger Eingabe-Schieberegler für die einzelnen Treppen, um die gewünschten Einstellungen zu erzielen
4. Verwenden des Dynamo-Diagramms **Railing Along Path**, um Absätze um die Treppenöffnungen zu erstellen.
5. Hinzufügen einer mittleren Wange zu allen Treppen mithilfe von **Sweep**
6. Platzieren aller Treppen, Wangen und Geländer auf einem neuen Layer mit dem Namen **Encode Main Building – Stairs**

![Fertige Treppen, Schnittansichten](../../.gitbook/assets/12%20%287%29.png)

![Fertige Treppen, von der Szene Eye Level &#x2013; Plaza aus betrachtet](../../.gitbook/assets/13%20%287%29.png)



