# 2.6 – Uzly aplikace Dynamo v aplikaci FormIt

_Aplikace FormIt se dodává s knihovnou uzlů aplikace Dynamo, které přenášejí geometrii mezi aplikacemi FormIt a Dynamo. V předchozích kapitolách jsme viděli, jak lze v aplikaci FormIt vytvářet a dynamicky upravovat objekty aplikace Dynamo. V této kapitole upravíme dodaný graf aplikace Dynamo a vytvoříme upravenou verzi grafu schodiště._

_V této kapitole budeme používat model_ _**Encode Campus Sample Model.axm**_ _a_ _skript_ _**Stairs by Top Edge.dyn**_ _. Pokud jste tak ještě neučinili, stáhněte si_ _**datovou sadu k příručce Základy aplikace FormIt, Část 2**, ve které naleznete oba tyto soubory._

_Pokud jste s aplikací Dynamo v aplikaci FormIt dosud nepracovali, přečtěte si kapitolu_ _**1.10 – **_ _**Výpočetní skupiny s aplikací Dynamo**_ _v_ _**části I**_ _této příručky. Ačkoli tato kapitola zahrnuje úpravy grafů aplikace Dynamo, budeme se zabývat pouze prvky aplikace Dynamo, které se týkají uzlů specifických pro aplikaci FormIt. Pokud s aplikací Dynamo začínáte, můžete se dozvědět více na stránkách příručky_ [_**Dynamo Primer**_](https://primer.dynamobim.org/cs/01_Introduction/1-2_what_is_dynamo.html)_**.**_

_**V této části budete potřebovat aplikaci FormIt pro systém Windows verze 2022.0 nebo novější.**_

## **Přidání umístění knihovny aplikace Dynamo**

_I když je aplikace FormIt dodávána s knihovnou grafů ve složce **Ukázky aplikace Dynamo**, budeme potřebovat místo pro vytváření a ukládání vlastních grafů. Za tímto účelem budeme chtít nejprve přidat novou složku do **umístění knihovny Dynamo** v aplikaci FormIt. Je to podobné jako přidání složky do knihovny obsahu FormIt, takže pokud si potřebujete osvěžit informace, přečtěte si v příručce Základy aplikace FormIt, Část I kapitolu **1.11 – Import modelů pomocí knihovny obsahu**._

1 – Přidání nového **umístění knihovny aplikace Dynamo**:

1. S otevřeným souborem **Encode Campus Sample Model.axm** přejděte na **paletu Dynamo**.
2. V levém horním rohu klikněte na tlačítko **Připojit adresář aplikace Dynamo**.
3. Otevře se okno **Předvolby** s automaticky vybranou kartou **Dynamo**. Klikněte na ikonu **Přidat nové umístění knihovny aplikace Dynamo** (ikona se znaménkem „+“).
4. Přejděte do umístění, kam jste stáhli **datovou sadu modelu Encode**, a vyberte složku **Supporting files** &gt; **FormIt Primer Graphs**.
5. Klikněte na tlačítko **Vybrat složku** a potom na tlačítko **OK**, čímž se vrátíte zpět do aplikace FormIt.
6. V rozevíracím seznamu v horní části **palety Dynamo** vyberte složku **FormIt Primer Graphs**, kterou jste právě přidali.

![](../../.gitbook/assets/0%20%2821%29.png)

## **Uzel** **SendToFormIt**

_Aby mohl jakýkoli graf aplikace Dynamo pracovat s aplikací FormIt, musí mít alespoň jeden uzel_ _**SendToFormIt**_ _._

1 – Začněme tím, že zkusíme beze změny použít graf **Schodiště podle horní hrany** ze složky, kterou jsme právě přidali.

1. Začněte přechodem na scénu Řez – podélný.

2 – Přidáme do grafu uzel **SendToFormIt**. Za tímto účelem použijeme v novém modelu aplikace FormIt příkaz Upravit zdrojový graf, abychom nezměnili pracovní model našimi úpravami grafu.

1. Na hlavním panelu klikněte pravým tlačítkem na ikonu **FormIt** a výběrem položky **FormIt** otevřete nové prázdné okno aplikace FormIt. \(Případně klikněte prostředním tlačítkem myši na ikonu aplikace FormIt\).
2. Na **paletě Dynamo** vyhledejte dlaždici **Schodiště podle horní hrany** a klikněte na malou rozevírací šipku na pravém okraji dlaždice nebo na dlaždici klikněte pravým tlačítkem.
3. Vyberte možnost **Upravit zdrojový graf**. Tím se automaticky spustí aplikace Dynamo a otevře se graf, který chcete upravit.

![](../../.gitbook/assets/2%20%2822%29.png)

2 – Po otevření aplikace Dynamo a grafu přibližte níže zobrazenou oblast zcela vpravo, která obsahuje zelené a fialové skupiny.

![](../../.gitbook/assets/3%20%2819%29.png)

_**Poznámka:**_ _Směr grafů aplikace Dynamo je zleva doprava, takže se výstupní uzly obvykle nacházejí na pravé straně grafu._

3 – Nyní je nutné přidat uzel **SendToFormIt**, aby bylo možné odeslat geometrii schodiště, kterou vidíte na pozadí, do našeho modelu aplikace FormIt:

1. V části Doplňky vlevo rozbalte rozevírací seznam **FormIt** a klikněte na položku **SendToFormIt**. Ve středu obrazovky se zobrazí uzel **SendToFormIt**.
2. Přidejte nový uzel do fialové skupiny **Odeslat geometrii schodiště do aplikace FormIt** tak, že vyberete fialovou skupinu i nový uzel **SendToFormIt** a potom kliknete pravým tlačítkem myši na uzel **SendToFormIt** a vyberete možnost **Přidat do skupiny**. Přesuňte nový uzel do umístění podobného tomu, které je zobrazeno na následujícím obrázku.
3. Klikněte pravým tlačítkem na uzel **SendToFormIt** a ujistěte se, že je zaškrtnuta možnost **Je výstup**. Ve výchozím nastavení by tomu tak být mělo, pokud však není, nebude do aplikace FormIt odeslána žádná geometrie.
4. Přejmenujte uzel **SendToFormIt** na **SendToFormIt.Stairs**.
5. Připojte dva \(2\) vstupy nového uzlu **SendToFormIt.Stairs**, jak je znázorněno na obrázku níže.

![](../../.gitbook/assets/4%20%2818%29.png)

_**Poznámka:**_ _Přestože používáme pouze uzel_ _**SetAsMesh**_ _, který určuje, zda se geometrie odešle do FormIt jako objekt nebo jako síť, je k dispozici_ _řada uzlů_ _**FormItGroupOptions**_ _. Každý z nich řídí různé vlastnosti geometrie odesílané do aplikace FormIt. Neváhejte a vyzkoušejte si některé z nich._

4 – Vraťme se zpět do aplikace FormIt a podívejme se, zda vše funguje:

1. Uložte aplikaci Dynamo a poté ji zavřete. Aktualizovaný graf se automaticky načte zpět do aplikace FormIt.
2. Přepněte zpět do okna aplikace FormIt se souborem **Encode Campus Sample Model.axm** a na **paletě Dynamo** klikněte znovu na možnost **Schodiště podle horní hrany**.
3. Umístěte schodiště do modelu podobně, jak je znázorněno na obrázku níže.
4. Vyberte schodiště a všimněte si, že jeho název skupiny odpovídá názvu grafu aplikace Dynamo.
5. Nyní dvakrát klikněte na skupinu, kterou chcete upravit, a vyberte vnořenou skupinu geometrie schodiště. Všimněte si, že název této skupiny odpovídá názvu, který jsme dali uzlu v aplikaci Dynamo.

![](../../.gitbook/assets/5%20%2817%29.png)

_**Poznámka:**_ _Nedělejte si starosti s přesným umístění schodiště. Toto vyladíme v následující části._

![](../../.gitbook/assets/6%20%2814%29.png)

_**Poznámka:**_ _V tomto případě jsme potřebovali pouze jeden_ _**uzel SendToFormIt**_ _, ale můžete vytvořit více. Každý z nich vytvoří v aplikaci FormIt novou skupinu na základě názvu uzlu_ _**SendToFormIt**_ _, ze kterého pochází._

## **Uzly SelectFromFormIt**

_Jak jsme viděli v předchozích kapitolách, grafy aplikace Dynamo mohou uživatele vyzvat k výběru konkrétní geometrie, kterou potom graf použije. Nyní přidáme dva \(2\) takové uzly do našeho grafu schodiště, aby bylo možné vypočítat orientaci, šířku a výšku schodiště z vybrané geometrie aplikace FormIt v aplikaci Dynamo._

1 – Odstraňte schodiště, které jsme právě umístili.

2 – Přepněte zpět do prázdného okna aplikace FormIt.

3 – Na **paletě Dynamo** klikněte na rozevírací seznam dlaždice **Schodiště podle horní hrany** a vyberte možnost **Upravit zdrojový graf**. Tím se znovu spustí aplikace Dynamo a otevře se graf, který chcete upravit.

_**Poznámka:**_ _Pokud graf aplikace Dynamo upravíte přímo z jeho_ _**palety Vlastnosti**_ _kliknutím na možnost_ _**Upravit vložený graf**_ _\(místo z_ _**palety Dynamo**\), budete upravovat pouze vložený graf pro danou skupinu, nikoli zdrojový graf uložený ve složce, kterou jsme dříve přidali do knihovny aplikace Dynamo v aplikaci FormIt._

4 – Tentokrát chceme přidat některé uzly výběru, které se často nacházejí na začátku nebo na levé straně grafu. Přibližte oblast zobrazenou níže.

![](../../.gitbook/assets/7%20%289%29.png)

5 – Přidání nových uzlů výběru:

1. V oblasti **Doplňky** rozbalte položku **FormIt** a dvakrát klikněte na položku **SelectFromFormIt**, čímž se uprostřed obrazovky vytvoří dva \(2\) nové uzly.
2. Uspořádejte je nad sebou, jak je znázorněno na následujícím obrázku, vytvořte pro ně oranžovou skupinu a pojmenujte ji **Geometrie vybraná z aplikace FormIt**. Pořadí, ve kterém je uživatel vyzván k výběru prvků v aplikaci FormIt, je založeno na vertikálním umístění uzlů výběru v aplikaci Dynamo. Nejvýše umístěný uzel se zobrazí jako první a dolní uzel se zobrazí jako poslední.
3. Přejmenujte horní uzel na **Vybrat horní hranu** a dolní uzel na **Vybrat dolní podlaží**. Při spuštění tohoto grafu v aplikaci FormIt se zobrazí Průvodce výběrem aplikace Dynamo, který použije názvy těchto uzlů při výzvách k výběru geometrie.
4. Klikněte pravým tlačítkem na každý uzel a ujistěte se, že je zaškrtnuta možnost **Je vstupem**. Ve výchozím nastavení by mělo být zaškrtnuto, pokud však není, tyto uzly nebudou aplikací FormIt rozpoznány.
5. Propojte nové uzly výběru, jak je znázorněno na obrázku níže. Každý z nich má pouze jedno \(1\) připojení.

![](../../.gitbook/assets/8%20%2811%29.png)

_**Poznámka:**_ _U nových uzlů se mohou objevit upozornění, která způsobí, že budou žluté, jak je vidět výše. Prozatím je můžete ignorovat. Upozornění jsou způsobena tím, že uzly očekávají geometrii z aplikace FormIt, ale zatím žádnou neobdržely \(protože jsme je právě přidali\)._

6 – Nyní je potřeba v grafu provést několik dalších změn, aby se schodiště vytvořilo z geometrie z uzlů výběru. Nejprve je nutné změnit vstupy **Výška mezi podlažími** a **Šířka schodiště** tak, aby své hodnoty získávaly z vybrané geometrie, nikoli ze vstupních posuvníků:

1. Se stisknutou klávesou **Shift** klikněte na výstup uzlu **Výška mezi podlažími** uvnitř oranžové skupiny **Vstupy posuvníků** a přesuňte tato spojení do výstupu uzlu **Vypočítaná výška mezi podlažími** přímo nad ním.
2. Stejným způsobem přesuňte výstupy uzlu **Šířka schodiště** v oranžové skupině **Vstupy posuvníků** do výstupu uzlu **Vypočítaná výška mezi podlažími** výše.
3. Odstraňte staré uzly **Výška mezi podlažími** a **Šířka schodiště**, protože je již nebudete potřebovat.

![](../../.gitbook/assets/9%20%288%29.png)

_**Poznámka:**_ _Přidávání libovolných_ _vstupních uzlů aplikace Dynamo do grafu je velmi podobné přidávání uzlů_ _**SelectFromFormIt**_._ Jen se ujistěte, že jsou označeny jako_ _**Je vstupem**_, přejmenujte je a uspořádejte je v pořadí, v němž chcete, aby se zobrazovaly v aplikaci FormIt, a uzly se následně objeví na _**paletě Vlastnosti** aplikace FormIt._

7 – Nakonec přibližte pravý konec grafu, kam jsme dříve přidali uzel **SendToFormIt.Stairs**. Tento výstupní uzel chceme přepnout tak, aby používal geometrii schodiště, která byla přesunuta a otočena na základě vybrané geometrie v umístění aplikace FormIt. Stačí přepnout připojení ze skupiny **Geometrie schodiště** do skupiny **Otočená a převedená geometrie schodiště**.

![](../../.gitbook/assets/10%20%288%29.png)

## **Použití grafu**

1 – Když jsme přidali uzly výběru a zapekly vzpěry, je graf připraven. Uložte a zavřete aplikaci Dynamo a poté přejděte zpět do okna aplikace FormIt se souborem **Encode Campus Sample Model.axm** a vyzkoušejte jej:

1. Ujistěte se, že se stále nacházíte ve scéně **Řez – podélný**, a poté nakreslete čáru dlouhou 6’ podél pravé hrany otvoru schodiště v první podlaží. Tím definujete šířku a úhel schodiště.
2. Na **paletě Dynamo** kliknutím na dlaždici **Schodiště podle horní hrany** spusťte graf.
3. Zobrazí se Průvodce výběrem aplikace Dynamo s pokynem k provedení prvního výběru pomocí názvu, který jsme tomuto uzlu výběru dali dříve: **Vybrat horní hranu**. Jakmile vyberete hranu, kterou jste právě nakreslili, klikněte v Průvodci výběrem aplikace Dynamo na šipku dopředu.
4. Zobrazí se další výzva s názvem dalšího uzlu výběru: **Vybrat dolní podlaží**. Vyberte desku přízemí hlavní budovy Encode a poté klikněte na značku zaškrtnutí.
5. Po vytvoření schodiště si všimněte, že na **paletě Vlastnosti** nyní máte možnost znovu vybrat geometrii pro kterýkoli z uzlů výběru. Všimněte si také, že posuvníky odpovídající odstraněným vstupním uzlům **Výška mezi podlažími** a **Šířka schodiště** již nejsou k dispozici. Nyní se tyto hodnoty vypočítávají z vybrané geometrie.

![](../../.gitbook/assets/11%20%288%29.png)

_**Poznámka:** Pokud změníte umístění horní hrany nebo výšku dolního podlaží a znovu spustíte graf, schodiště se odpovídajícím způsobem aktualizuje. Obvykle je vhodné vyhnout se ručnímu přesouvání geometrie generované aplikací Dynamo, která závisí na výběrech aplikace FormIt, protože to může změnit její vztah k vybrané geometrii použité k jejímu vytvoření. Někdy pomůže provést seskupení skupiny aplikace Dynamo a geometrie výběru dohromady. Zůstanou tak propojené a vyhnete se problémům._

2 – Na závěr můžete přidat vlastní úpravy. Níže si můžete prohlédnout úpravy, které jsme provedli pomocí různých nástrojů popsaných v předchozích kapitolách:

1. Vytvořili jsme schodiště mezi jednotlivými podlažími.
2. Mírně jsme pootočili horní hranu dolního schodiště, aby vzniklo lehce diagonální schodiště do přízemí.
3. Mírně jsme upravili některé posuvníky vstupů pro jednotlivé schody, abychom dosáhli požadovaného nastavení.
4. Pomocí grafu aplikace Dynamo **Zábradlí podél cesty** jsme vytvořili podesty kolem otvorů schodiště.
5. Pomocí příkazu **Tažení** jsme pro každé schodiště přidali střední schodnici.
6. Všechna schodiště, řetězce a zábradlí jsme umístili do nové hladiny s názvem **Hlavní budova Encode – schodiště**.

![Dokončené schodiště, pohledy v řezu](../../.gitbook/assets/12%20%287%29.png)

![Dokončené schodiště, pohled ze scény Úroveň očí – náměstí](../../.gitbook/assets/13%20%287%29.png)



