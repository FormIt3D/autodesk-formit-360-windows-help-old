# 2.6 — Węzły FormIt dodatku Dynamo

_Program FormIt zawiera bibliotekę węzłów Dynamo, które umożliwiają przenoszenie geometrii między programami FormIt i Dynamo. W poprzednich rozdziałach zobaczyliśmy, jak można tworzyć i dynamicznie dostosowywać obiekty dodatku Dynamo w programie FormIt. W tym rozdziale przeprowadzimy edycję udostępnionego wykresu Dynamo, aby utworzyć zmodyfikowaną wersję wykresu schodów OOTB._

_W tym rozdziale będziemy używać zarówno modelu_ _**Encode Campus Sample Model.axm**_ _,_ _jak i skryptu Dynamo_ _**Stairs by Top Edge.dyn**_ _. Jeśli nie zostało to jeszcze zrobione, oba te pliki możesz znaleźć, pobierając zestaw danych_ _**FormIt Primer Part 2 Dataset**._

_Jeśli jeszcze nie umiesz używać dodatku Dynamo w programie FormIt, zalecamy zapoznanie się z rozdziałem_ _**1.10 —**_ _**Grupy obliczeniowe w dodatku Dynamo**_ _w_ _**części I**_ _tego przewodnika. Ten rozdział będzie obejmował edycję wykresów Dynamo, ale w rzeczywistości uwzględnimy tylko elementy dodatku Dynamo związane z węzłami specyficznymi dla programu FormIt. Jeśli jeszcze nie znasz dodatku Dynamo, możesz dowiedzieć się więcej, odwiedzając stronę_ [_**Dynamo Primer**_](https://primer.dynamobim.org/pl/01_Introduction/1-2_what_is_dynamo.html)_**.**_

_**W tej sekcji będzie potrzebny program FormIt dla systemu Windows w wersji 2022.0 lub nowszej.**_

## **Dodawanie położenia biblioteki Dynamo**

_Oprogramowanie FormIt jest dostarczane z biblioteką wykresów OOTB w folderze **Dynamo Samples** \(Przykłady Dynamo\), ale potrzebujemy miejsca na tworzenie i zapisywanie własnych wykresów niestandardowych. W tym celu najpierw dodamy nowy folder w oknie **Położenia biblioteki Dynamo** programu FormIt. Odbywa się to podobnie jak w przypadku dodawania folderu do biblioteki zawartości programu FormIt. Jeśli potrzebujesz odświeżenia wiedzy, zobacz rozdział **1.11 — Importowanie modeli z biblioteką elementów** w przewodniku Primer — część I._

1 — Aby dodać nowe **położenie biblioteki Dynamo**:

1. Po otwarciu pliku **Encode Campus Sample Model.axm** przejdź do **palety Dynamo**.
2. Kliknij przycisk **Połącz katalog dodatku Dynamo** w lewym górnym rogu.
3. Zostanie otwarte okno **Preferencje** z automatycznie wybraną kartą **Dynamo**. Kliknij ikonę „plus” **Dodaj nowe położenie biblioteki Dynamo**.
4. Przejdź do miejsca, do którego został pobrany zestaw danych **Encode Model Data Set**, i wybierz folder **Supporting Files** \(Pliki pomocnicze\) &gt; **FormIt Primer Graphs** \(Wykresy przewodnika FormIt\).
5. Kliknij przycisk **Select Folder** \(Wybierz folder\), a następnie przycisk **OK**. Nastąpi powrót do programu FormIt.
6. Na liście rozwijanej folderów w górnej części **palety Dynamo** wybierz właśnie dodany folder **FormIt Primer Graphs** \(Wykresy przewodnika FormIt\).

![](../../.gitbook/assets/0%20%2821%29.png)

## **Węzeł** **SendToFormIt**

_Aby dowolny wykres Dynamo współpracował z programem FormIt, musi zawierać co najmniej jeden węzeł_ _**SendToFormIt**_ _._

1 — Zacznijmy od próby użycia wykresu **Stair by Top Edge** \(Schody przy górnej krawędzi\) bez żadnych zmian, z właśnie dodanego folderu.

1. Zacznij od przejścia do sceny Section — Longitudinal \(Przekrój — Podłużny\).

2 — Dodamy do wykresu węzeł **SendToFormIt**. W tym celu użyjemy polecenia „Edit Source Graph” \(Edytuj wykres źródłowy\) w nowym modelu FormIt, aby nie zaśmiecać działającego modelu naszymi zmianami wykresu.

1. Kliknij prawym przyciskiem myszy **ikonę programu FormIt** na pasku zadań i wybierz opcję **FormIt**, aby otworzyć nowe puste okno FormIt \(lub po prostu kliknij środkowym przyciskiem myszy ikonę programu FormIt\).
2. W **palecie Dynamo** znajdź kafelek **Stairs by Top Edge** \(Schody przy górnej krawędzi\) i kliknij małą strzałkę listy rozwijanej na prawej krawędzi kafelka lub kliknij kafelek prawym przyciskiem myszy.
3. Wybierz opcję **Edit Source Graph** \(Edytuj wykres źródłowy\). Spowoduje to automatyczne uruchomienie dodatku Dynamo i otwarcie wykresu, który chcemy edytować.

![](../../.gitbook/assets/2%20%2822%29.png)

2 — Po otwarciu dodatku Dynamo i wykresu powiększ pokazany poniżej obszar zawierający najbardziej wysunięte na prawo zielone i fioletowe grupy.

![](../../.gitbook/assets/3%20%2819%29.png)

_**Uwaga:**_ _wykresy Dynamo przebiegają od lewej do prawej strony, dlatego węzły wyjściowe zazwyczaj znajdują się po prawej stronie wykresu._

3 — Teraz musimy dodać węzeł **SendToFormIt**, aby wysłać geometrię schodów widoczną w tle do naszego modelu FormIt:

1. W obszarze Add-ons \(Dodatki\) \(pakiety\) po lewej stronie rozwiń listę rozwijaną **FormIt** i kliknij pozycję **SendToFormIt**. Na środku ekranu zostanie wyświetlony węzeł **SendToFormIt**.
2. Dodaj nowy węzeł do fioletowej grupy **Send Stair Geometry to FormIt** \(Wysyłaj geometrię schodów do programu FormIt\), zaznaczając zarówno fioletową grupę, jak i nowy węzeł **SendToFormIt**, a następnie klikając prawym przyciskiem myszy węzeł **SendToFormIt** i wybierając opcję **Add To Group** \(Dodaj do grupy\). Przenieś nowy węzeł w położenie podobne do pokazanego na poniższej ilustracji.
3. Kliknij prawym przyciskiem myszy węzeł **SendToFormIt** i upewnij się, że jest zaznaczona opcja **Is Output** \(Jest wysyłany\). Domyślnie powinna być zaznaczona. Jeśli nie jest, żadna geometria nie zostanie wysłana do programu FormIt.
4. Zmień nazwę węzła **SendToFormIt** na **SendToFormIt.Stairs**.
5. Połącz dwa \(2\) wejścia nowego węzła **SendToFormIt.Stairs**, jak pokazano na poniższej ilustracji.

![](../../.gitbook/assets/4%20%2818%29.png)

_**Uwaga:**_ _mimo że używamy tylko węzła opcji_ _**SetAsMesh**_ _, który określa, czy geometria jest wysyłana do programu FormIt jako obiekt, czy jako siatka,_ _dostępnych jest kilka węzłów_ _**FormItGroupOptions**_ _. Każdy z nich steruje różnymi właściwościami geometrii wysyłanej do programu FormIt. Poeksperymentuj z kilkoma z nich._

4 — Wróćmy do programu FormIt i zobaczmy efekty:

1. Zapisz, a następnie zamknij dodatek Dynamo. Zaktualizowany wykres zostanie automatycznie wczytany ponownie do programu FormIt.
2. Przełącz z powrotem na okno programu FormIt zawierające plik **Encode Campus Sample File** i **paletę Dynamo**. Kliknij ponownie kafelek **Stair by Top Edge** \(Schody przy górnej krawędzi\).
3. Umieść schody w modelu, podobnie jak pokazano na poniższej ilustracji.
4. Wybierz schody i zwróć uwagę, że nazwa ich grupy jest zgodna z nazwą wykresu Dynamo.
5. Teraz kliknij dwukrotnie, aby edytować grupę, a następnie wybierz zagnieżdżoną grupę geometrii schodów. Zwróć uwagę, że nazwa tej grupy odpowiada nazwie nadanej węzłowi w dodatku Dynamo.

![](../../.gitbook/assets/5%20%2817%29.png)

_**Uwaga:**_ _nie martw się dokładnym położeniem schodów — dopasujemy je precyzyjnie w kolejnej sekcji._

![](../../.gitbook/assets/6%20%2814%29.png)

_**Uwaga:**_ _w tym przypadku potrzebowaliśmy tylko jednego węzła_ _**SendToFormIt**_ _, ale można utworzyć ich wiele. Każdy z nich spowoduje utworzenie nowej grupy w programie FormIt na podstawie nazwy węzła_ _**SendToFormIt**_ _, z którego ona pochodzi._

## **Węzły SelectFromFormIt**

_Jak zobaczyliśmy w poprzednich rozdziałach, wykresy Dynamo mogą monitować użytkownika o wybranie określonej geometrii, która jest następnie używana w wykresie. Teraz dodamy dwa \(2\) z tych węzłów do naszego wykresu schodów, co umożliwi obliczenie orientacji, szerokości i wysokości schodów na podstawie wybranej geometrii programu FormIt w dodatku Dynamo._

1 — Usuń niedawno umieszczone schody.

2 — Wróć do pustego okna programu FormIt.

3 — W **palecie Dynamo** kliknij listę rozwijaną kafelka **Stairs by Top Edge** \(Schody przy górnej krawędzi\) i wybierz opcję **Edit Source Graph** \(Edytuj wykres źródłowy\). Wykres zostanie ponownie otwarty w dodatku Dynamo.

_**Uwaga:**_ _jeśli wykres Dynamo jest edytowany bezpośrednio z poziomu_ _**palety Właściwości**_ _przez kliknięcie opcji_ _**Edytuj osadzony wykres**_ _\(zamiast z poziomu_ _**palety Dynamo**\), będziesz edytować osadzony wykres tylko dla tej grupy, a nie wykres źródłowy zapisany w folderze, który dodaliśmy wcześniej do biblioteki dodatku Dynamo w programie FormIt._

4 — Tym razem chcemy dodać kilka węzłów wyboru, które często znajdują się w pobliżu strony początkowej \(lewej\) wykresu. Powiększ pokazany poniżej obszar.

![](../../.gitbook/assets/7%20%289%29.png)

5 — Aby dodać nowe węzły wyboru:

1. W obszarze **Add-Ons**\(Dodatki\) rozwiń węzeł **FormIt** i kliknij dwukrotnie pozycję **SelectFromFormIt**, co powinno spowodować utworzenie dwóch \(2\) nowych węzłów na środku ekranu.
2. Umieść je jeden nad drugim, jak pokazano na poniższej ilustracji, utwórz dla nich pomarańczową grupę i nazwij ją **Geometry Selected from FormIt** \(Geometria wybrana z programu FormIt\). Kolejność, w której użytkownik jest monitowany o wybranie elementów w programie FormIt, jest uzależniona od położenia pionowego wybranych węzłów w dodatku Dynamo. Węzeł najwyższego poziomu będzie wyświetlany jako pierwszy, a węzeł dolny — jako ostatni.
3. Zmień nazwę górnego węzła na **Select Top Edge** \(Wybierz górną krawędź\), a dolnego węzła na **Select Bottom Floor** \(Wybierz dolną kondygnację\). Po uruchomieniu tego wykresu w programie FormIt zostanie wyświetlony kreator wyboru Dynamo, który będzie używał nazw tych węzłów jako monitów o wybór geometrii.
4. Kliknij prawym przyciskiem myszy każdy węzeł i upewnij się, że jest zaznaczona opcja **Is Input** \(Jest wprowadzany\). Powinna ona być domyślnie zaznaczona, ale jeśli nie jest, te węzły nie będą rozpoznawane przez program FormIt.
5. Połącz nowe węzły wyboru, jak pokazano na poniższej ilustracji. Każdy z nich ma tylko jedno \(1\) połączenie.

![](../../.gitbook/assets/8%20%2811%29.png)

_**Uwaga:**_ _nowe węzły mogą zawierać ostrzeżenia, w wyniku czego zmieniają kolor na żółty, jak pokazano powyżej. Na razie możesz to zignorować. Ostrzeżenia są spowodowane tym, że węzły oczekują geometrii z programu FormIt, ale żadnej jeszcze nie otrzymały \(ponieważ dopiero je dodaliśmy\)._

6 — Teraz musimy wprowadzić kilka dodatkowych zmian na wykresie, aby schody zostały utworzone na podstawie geometrii z węzłów wyboru. Najpierw musimy zmienić dane wejściowe **Floor-to-Floor Height** \(Wysokość między kondygnacjami\) i **Stair Width** \(Szerokość schodów\), aby pobierały one wartości z wybranej geometrii, a nie z suwaków wejściowych:

1. Przytrzymując naciśnięty klawisz **Shift**, kliknij wyjście węzła **Floor-to-Floor Height** \(Wysokość między kondygnacjami\) wewnątrz pomarańczowej grupy **Slider Inputs** \(Dane wejściowe suwaków\) i przesuń te przewody do wyjścia węzła **Calculated Floor-to-Floor Height** \(Obliczona wysokość między kondygnacjami\) tuż powyżej.
2. Używając tej samej techniki, przesuń przewody wyjściowe z listy **Stair Width** \(Szerokość schodów\) w pomarańczowej grupie **Slider Inputs** \(Dane wejściowe suwaków\) do wyjścia węzła **Calculated Floor-to-Floor Height** \(Obliczona wysokość między kondygnacjami\) powyżej.
3. Usuń stare węzły **Floor-to-Floor Height** \(Wysokość między kondygnacjami\) i **Stair Width** \(Szerokość schodów\), ponieważ nie będą już potrzebne.

![](../../.gitbook/assets/9%20%288%29.png)

_**Uwaga:**_ _jeśli chcesz dodać do wykresu jakiekolwiek węzły wejściowe_ _Dynamo, operacja ta jest bardzo podobna do dodawania węzłów_ _**SelectFromFormIt**__. Upewnij się tylko, że są oznaczone jako_ _**Is Input** \(Jest wprowadzany\), zmień ich nazwę i uporządkuj je tak, jak powinny być wyświetlane w programie FormIt, a pojawią się one w_ _**palecie Właściwości** programu FormIt._

7 — Na koniec powiększ prawy koniec wykresu, gdzie dodaliśmy wcześniej węzeł **SendToFormIt.Stairs**. Chcemy przełączyć ten węzeł wyjściowy, aby użyć geometrii schodów, która została przesunięta i obrócona na podstawie wybranej geometrii w lokalizacji oprogramowania FormIt. Wystarczy przełączyć połączenie z grupy **Stair Geometry** \(Geometria schodów\) do grupy **Rotated and Translated Stair Geometry** \(Obrócona i przekształcona geometria schodów\).

![](../../.gitbook/assets/10%20%288%29.png)

## **Korzystanie z wykresu**

1 — Teraz po dodaniu węzłów wyboru i tworzenia wykres jest gotowy. Zapisz i zamknij dodatek Dynamo, a następnie przełącz z powrotem na okno programu FormIt z plikiem **Encode Campus Sample Model.axm** i wypróbuj go, wykonując następujące czynności:

1. Upewnij się, że nadal otwarta jest scena **Section — Longitudinal** \(Przekrój — Podłużny\), a następnie narysuj linię o długości 6 stóp wzdłuż prawej krawędzi otworu schodów pierwszej kondygnacji. Spowoduje to zdefiniowanie szerokości i kąta nachylenia schodów.
2. W **palecie Dynamo** kliknij kafelek **Stairs by Top Edge** \(Schody przy górnej krawędzi\), aby rozpocząć wykres.
3. Zostanie wyświetlony kreator wyboru Dynamo z poleceniem dokonania pierwszego wyboru przy użyciu nazwy nadanej wcześniej temu węzłowi wyboru: **Select Top Edge** \(Wybierz górną krawędź\). Po wybraniu właśnie narysowanej krawędzi kliknij strzałkę do przodu w kreatorze wyboru Dynamo.
4. Następnym monitem będzie nazwa drugiego węzła wyboru **Select Bottom Floor** \(Wybierz dolną kondygnację\). Wybierz połać parteru budynku głównego Encode, a następnie kliknij znacznik wyboru.
5. Po utworzeniu schodów zwróć uwagę, że w **palecie Właściwości** możesz teraz ponownie wybrać geometrię jednego z węzłów wyboru. Zauważ również, że nie ma tam już suwaków odpowiadających usuniętym węzłom wejściowym **Floor-to-Floor Height** \(Wysokość między kondygnacjami\) i **Stair Width** \(Szerokość schodów\) — są one teraz obliczane na podstawie wybranej geometrii.

![](../../.gitbook/assets/11%20%288%29.png)

_**Uwaga:** jeśli zmienisz położenie górnej krawędzi lub wysokość dolnej kondygnacji i uruchomisz ponownie wykres, schody zostaną odpowiednio zaktualizowane. Zazwyczaj zaleca się, aby unikać ręcznego przenoszenia geometrii wygenerowanej w dodatku Dynamo, która zależy od wyborów w programie FormIt, ponieważ może to zmienić jej zależność od wybranej geometrii użytej do jej utworzenia. Czasami zgrupowanie grupy Dynamo i wybranej geometrii pomaga utrzymać ich połączenie i uniknąć problemów._

2 — Aby zakończyć, możesz dodać swoje własne poprawki. Używając różnych narzędzi opisanych w poprzednich rozdziałach, wykonaliśmy następujące czynności:

1. Utworzyliśmy schody między poszczególnymi kondygnacjami.
2. Delikatnie obróciliśmy górną krawędź dolnych schodów, aby utworzyć lekko ukośne schody na parter.
3. Nieznacznie dostosowaliśmy niektóre suwaki wejściowe dla poszczególnych schodów, aby uzyskać żądane ustawienia.
4. Za pomocą wykresu Dynamo **Railing Along Path** \(Poręcz wzdłuż ścieżki\) utworzyliśmy podesty wokół otworów na schody.
5. Dodaliśmy środkowy policzek dla każdej klatki schodowej za pomocą opcji **Przeciągnij**.
6. Umieściliśmy wszystkie schody, ciągi i poręcze na nowej warstwie o nazwie **Encode Main Building — Stairs** \(Budynek główny Encode — Schody\).

![Gotowe schody, widoki w przekroju.](../../.gitbook/assets/12%20%287%29.png)

![Gotowe schody, widoczne w scenie Eye Level &#x2013; Plaza \(Poziom wzroku — Plac\).](../../.gitbook/assets/13%20%287%29.png)



