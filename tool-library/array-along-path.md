# パスに沿った配列

## Dynamo 提供

FormIt 2021 以降では、パスに沿ってオブジェクトを配列し、結果をその場でカスタマイズできます。Array Along Path \(パスに沿った配列\)は Dynamo から提供されています。そのため、配列を簡単に設定して目的の結果を得ることができ、ロジックを再実行するとジオメトリがその場で更新されます。

![](../.gitbook/assets/array-along-path.gif)

## Array Along Path を開始する

* FormIt for Windows の[Dynamo]パレットに移動し、Dynamo Samples フォルダを選択します。
* Array Along Path のサンプルをクリックします。
* 画面の左側に、「配列するオブジェクトを選択してください」というプロンプトが表示されます。
   * この手順では、FormIt オブジェクトを組み合わせて選択できます。
   * 項目を選択したら、プロンプトの右向き矢印の[次へ]ボタンをクリックするか、[Enter]を押します。
* 次に、「配列用のパスを選択してください」というプロンプトが表示されます。
   * ここでは、一連の連続したエッジのみ、または一連の連続したエッジを含むグループを選択する必要があります。
   * パスを選択したら、チェックマークのボタンをクリックするか[Enter]を押して終了します。
* [Dynamo]パレットに、変更を処理していることが示されます。完了すると、Dynamo で生成された配列が FormIt グループに表示され、修正できるようになります(下記参照)。

## 所定の位置で反復する

[Array Along Path]を実行した後、その結果が既定値に設定されていることが分かります。そこで、必要に応じて配列を変更します。

[Array Along Path]を実行すると結果を含む新しいグループが作成され、FormIt は自動的にそのグループを選択して、[Array Along Path]インスタンスで使用可能なオプションを表示します。

[グループ]を選択して[プロパティ]パレットに切り替えるか、自動的に[プロパティ]が表示されるグループを編集することで、いつでも[Array Along Path]プロパティに戻ることができます。

![](../.gitbook/assets/array-along-path-options.png)

### Select Object\(s\) to Array <a id="run"></a>

これをクリックすると、選択ウィザードに戻って配列するオブジェクトを変更できます。

### Select Array Path

これをクリックすると、選択ウィザードに戻って、配列の計算に使用するパスを変更できます。

### Array Type <a id="run"></a>

計算する配列のタイプを、距離または数のどちらかに切り替えることができます。

**True** の場合、計算は「距離」によって行われます。したがって、下の数はコピー間の距離を意味します。

**False** の場合、「コピー数」で計算が行われるため、このフィールドの下の数はパスに沿ってフィットするコピーの数を意味します。

### Include Original Selection In Results

**True** の場合:

* 選択したオブジェクトは新しいコピーの 1 つとしてカウントされます。
* 結果として得られる Dynamo グループには、元の選択が結果に含まれるため、新しいコピーと元の選択との間に Z 競合が発生します。元の選択を[レイヤ](layers.md)に配置し、オフにして非表示にすることができます。

**False** の場合:

* 結果の配列に元の選択は**含まれません**。そのため、元の選択に**加えて**指定したコピーの数を取得でき、結果で Z 競合は起こりません。

### Rotate Copies Along Path

**True** の場合、コピーはパスに対して元のオブジェクトの方向を維持するように回転します。

**False** の場合、コピーは回転せず、移動するだけです。

### Use Relative Positioning Along Path

**True** の場合:

* 各コピーは、パスと元のオブジェクト間の距離を維持します。
* 元のオブジェクトがパスの終点の 1 つに配置されて**いない**場合は、パスの残りの最大セグメントが配列計算に使用されます。

**False** の場合:

* 元のオブジェクトがパスに対してどこに位置するかに関係なく、パスの全長が配列の計算に使用されます。
* これにより、オブジェクトに対するパスの位置が切り離され、パス全体が使用されます。パスとオブジェクトが互いに離れている場合に便利です。

### Reverse Path Direction

閉じたパスにのみ対応します。閉じたパスで[Array Along Path]を使用すると、曲線の方向によって配列の結果が予期せぬ方向に反転することがあります。結果が反転した場合は、これを **True** に切り替えて、配列の方向を反転させます。

### Run <a id="run"></a>

オプションを編集したら、[Run]ボタンをクリックしてベースとなる Dynamo グラフを実行し、新しい結果を生成します。パラメータを変更すると、このボタンは青に変わるため、最終的なジオメトリで更新内容を確認するためには、ボタンをクリックする必要があることが分かります。‌

### Edit Embedded Graph <a id="edit-embedded-graph"></a>

このボタンをクリックすると、Dynamo グラフ エディタ環境が起動されます。ベースとなる Dynamo グラフを表示および編集して、パラメータをすばやく変更したり、ライブで更新を確認したり、ロジックを調査/調整できます。



## ジオメトリを選択する

[Array Along Path]用のオブジェクトと、他の選択ベースの Dynamo グラフを選択する場合:

* 頂点、エッジ、面、ソリッド、グループ、メッシュなど、FormIt オブジェクトを組み合わせて選択できます。
   * 手順によっては、一部のオブジェクトは選択できません。
   * たとえば、パスを選択する場合、連続した一連のエッジのみ、または連続した一連のエッジを含むグループを選択する必要があります。それ以外の場合は、グラフが失敗します。
* オブジェクトをダブルクリックすると、アタッチされているものをすべて選択できます。
* 領域選択ウィンドウを使用して、一連のオブジェクトを選択できます。
* 既に選択されているオブジェクトを選択すると、選択解除できます。
* 選択ベースの手順で処理するには、1 つ以上のオブジェクトが必要です。



