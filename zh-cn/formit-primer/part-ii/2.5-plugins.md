# 2.5 - 插件

FormIt 附带了多个插件，扩展了其内置功能。还可以安装由 AEC 社区开发的插件，甚至构建您自己的插件。

_在本章中，我们将对 FormIt 附带的几个插件进行举例介绍，以对_ _**“Encode Campus Sample Model.axm”**进行一些改进。如果尚未下载，可以从_ _**“FormIt Primer Part 2 数据集”**下载文件。_

## 安装插件

1 - 打开**“Encode Campus Sample Model.axm”**后，安装第一个插件：

1. 通过单击插件图标，打开**“插件管理器选项板”**。
2. 展开**“推荐”**下拉列表。
3. 向下滚动并找到**“生成灯串”**插件，然后通过单击该插件名称右侧的滑块来安装插件。
4. 在完成安装插头后，其选项板将自动打开。
5. 新图标也应显示在其他所有选项板图标的下方。

![](../../.gitbook/assets/install-plugins_0_annotated%20%281%29.png)

![](../../.gitbook/assets/install-plugins_1_annotated.png)

2 - 重新打开**“插件管理器选项板”**，然后重复该过程两次以安装**“管理相机”**和**“特性+”**插件。

3 - 确认已成功安装所有三个插件的步骤：

1. 最小化**“建议”**下拉列表，然后展开**“已安装”**下拉列表。这是一个仅查看已安装插件的简单方法。
2. 大多数插件（但并非所有插件）也附带有其自己的图标，这些图标应已添加到选项板图标工具栏中。可以随时返回到**“插件管理器选项板”**，然后打开/关闭插件滑块，这将在 FormIt 会话中添加或删除插件及其图标。
3. 如果安装的插件图标太多，无法在屏幕上都显示，可以通过在主**“菜单栏”**的**“窗口”**下拉列表中切换某些未使用插件图标的可见性来隐藏它们。

![](../../.gitbook/assets/2%20%287%29.png)

## 使用插件 - 生成灯串

_此款简洁插件让您可以根据直线或曲线为模型快速添加吊灯。_

1 - 在添加任何新灯之前，我们先使用模型中的预制场景查看预期结果。

1. 要跳转到包含现有灯串的场景，请打开**“场景选项板”**，然后双击名为**“视点标高 - 短巷”**的场景。
2. 请注意此模型随附的灯串 - 这是我们将要重新创建的对象，但位于其他位置。
3. 在**“层选项板”**中，打开**“辅助几何图形”**图层，以便可以看到用于生成这些灯串的原始线。

![](../../.gitbook/assets/3%20%2810%29.png)

2 - 现在，我们导航到其他巷子并添加一些灯。在**“场景选项板”**中，打开**“视点标高 - 长巷”**场景。请注意，这条巷还没有任何灯串。

3 - 创建新灯串的步骤：

1. 通过单击灯串图标，打开新安装的**“生成灯串选项板”**。默认情况下，新插件的图标显示在底部。
2. 将**“装置数量”**选项更改为**“10”**。
3. 双击其中一条辅助线，以编辑预先创建的**“灯串 - 长巷”**组。然后，单击其中一条预先绘制的辅助线以将其选中。
4. 单击插件选项板内的**“生成灯串”**按钮，此时应显示一个新灯串！请注意，每个灯串都是作为其自己唯一的组创建的。

![](../../.gitbook/assets/4%20%286%29.png)

_**注意：**_ _有些线穿过“凹槽咖啡”标志是可以的，因为该灯串插件会创建一条实际上在该符号下方下垂的悬链线曲线。_

4 - 尝试使用其他预制辅助线和/或创建一些您自己的辅助线，来创建更多灯串。玩转插件的设置，以获取不同的结果。

5 - 为帮助保持模型井然有序，完成后，建议您对所有辅助线进行分组并将该组放置在**“辅助几何图形”**图层上，以及将所有灯串组指定给**“上下文 - 外部照明”**图层。这将阻止辅助线显示在我们不希望看到它们的任何“视点标高”场景中。完成后，结果应类似于下一个屏幕截图。

![](../../.gitbook/assets/5%20%283%29.png)

_**注意：**_ _不同于 Dynamo 脚本创建的几何图形（可以通过_ _**“特性选项板”**更新和重新生成），插件所创建的对象（在大多数情况下）只是常规 FormIt 几何图形。创建后，只能使用 FormIt 内置的建模工具编辑它们。_

## 管理相机插件

_在整个入门手册中，我们一直使用场景作为有价值的工具来导航和控制整个模型的可见性。此插件允许我们查看和编辑当前相机的标高、将每个场景的相机输出为三维对象，以及在模型之间复制这些场景。_

1 - 首先，我们将调整**“视点标高 - 长巷”**场景，使其相机实际处于视点标高：

1. 如果还没有调整，请通过在**“场景选项板”**中双击**“视点标高 - 长巷”**场景，以返回该场景。
2. 通过单击带有齿轮图标的相机，打开**“管理相机选项板”**。
3. 将**“离地高度”**更改为**“5’-8””**。

![](../../.gitbook/assets/6%20%286%29.png)

_**注意：**_ _如果模型有标高，此插件还会显示_ _**“主相机”**下最近标高上方的高度。_

2 - 然后：

1. 返回**“场景选项板”**。
2. 确保**“视点标高 - 长巷”**场景仍处于选中状态（否则，单击以选择它）。
3. 单击**“更新场景”**按钮，以将新相机高度保存到此场景。

![](../../.gitbook/assets/7%20%281%29.png)

_**注意：**_ _还可以通过切换_ _**“场景选项板”**_ _顶部的_ _**“编辑场景相机”**_ _按钮（在“更新”和“播放”按钮之间），来调整场景相机的角度和位置。_

3 - 接下来，将场景输出到新模型。首先，我们需要使用**“管理相机”**插件为所有场景创建相机对象：

1. 再次打开**“管理相机选项板”**。
2. 确保**“将相机复制到剪贴板”**选项已选中。
3. 单击**“将场景输出到相机”**按钮。这可能需要几秒钟。
4. 如果整个画布变成白色，那是因为**“主相机”**与其中一个场景相机对齐。**“缩小(Z)”**，直到可以看到 3 个主要建筑物和新创建的相机对象。请注意，相机对象将自动放置到名为**“相机”**的一个较大分组中。在该组内，每个单独的相机都放置在其自己的组中，其名称与创建该相机时所使用的场景名称相同。

![](../../.gitbook/assets/8%20%287%29.png)

4 - 将这些场景复制到新模型。由于相机数据已保存到剪贴板，因此我们无需执行太多操作：

1. **“保存** **(Ctrl + S)”** 当前模型，然后将其关闭。
2. 通过在**“主菜单”**栏的**“文件”**下拉列表中，选择**“新建草图(Ctrl + N)”**，开始一个新的空草图。
3. 打开**“管理相机”**插件（如果尚未打开），并确保**“在剪贴板上查找相机”**选项处于选中状态。
4. 单击插件底部附近的**“从相机输入场景”**按钮，将输入来自其他模型的场景。要进行检查，请打开**“场景选项板”**和/或启用**“相机”**图层。您将看到所有场景和三维相机对象均已输入到此模型中。

![](../../.gitbook/assets/9%20%287%29.png)

## 特性+ 插件

_此插件的功能超过标准版的_ _**“特性选项板”**。如果选择多个组和/或类型的几何图形，此插件将为您提供所选内容的细分，并允许批量重命名组和组实例。_

1 **-** 首先，我们将查看主模型中门组的特性。重新打开**“Encode Campus Sample Model.axm”**，然后返回**“视点标高 - 长巷”**场景。开始使用**“特性+”**插件的步骤：

1. 通过单击带有“加号”符号图标的特性，即可打开**“特性+ 选项板”**。
2. 确保**“更改选择时更新”**处于选中状态。
3. 选择小巷右侧、名为**“门”**的双玻璃门组之一。
4. 在**“选择计数”**区域下，**“对象总数”**会告知我们已选择一 (**1**) 个对象。
5. 在下面，我们可以找到有关已选择哪些类型对象的详细信息。在本例中，已选择一 (**1**) 个组，但该组在模型中的其他位置有四 (**4**) 个实例。

![](../../.gitbook/assets/10%20%282%29.png)

_**注意：**_ _如果实际上只想更改选定图元，但却忘记先使其唯一，则检查选定组的实例数可能非常方便，以防止意外更改多个图元。_

2 - 此插件允许我们编辑组或组实例的名称（而无需进入组编辑模式），并允许一次重命名多个实例。如前所述，每个组都有一个名称，但该组的每个实例还可以有唯一的“实例”名称。由于此模型中很可能有多种类型的门，因此我们想要为此组及其某些实例指定更具体的名称。

1. 在第一个玻璃**“门”**组仍处于选中状态时，通过按住 **Shift** 或 **Ctrl** 键并单击第一个玻璃“门”组附近的其他双玻璃**“门”**组，从而将另一个**“门”**组添加到当前选择中。
2. 请注意，**“特性+ 选项板”**现已更新其**“选择计数”**，以显示已选择两 (**2**) 个实例，但仍仅选择一 (**1**) 个唯一**“族”**（也称为“组”）。（即使此插件使用的是术语**“族”**（Revit 用户应该很熟悉），但在此上下文中，它意味着与 FormIt 组是同一个意思。\)
3. 在**“组族”**区域下，将**“名称”**字段更新为**“门 - 双玻璃店面”**。这将更新所有实例的名称组名称，无论这些实例位于何处或当前是否处于选中状态，都无需双击并编辑组。
4. 由于这两个实例都是进入“凹槽咖啡”区域的门，因此我们只需通过在**“多组实例”**区域下的**“名称”**字段中输入**“凹槽咖啡门”**来重命名这两个实例。

**注意：**在标准**“特性选项板”**中，无法一次重命名组的多个实例。当想要同时重命名数十或数百个名称相同的实例时，这将非常方便。

![](../../.gitbook/assets/11%20%286%29.png)

_**注意：**_ _如果鼠标光标离开选项板，将无法再编辑选定的文本框。这适用于所有选项板，因此请确保在编辑选项板内的任何内容时，将光标保留在选项板边界内。_

3 - 现在，如果选择“凹槽咖啡”玻璃门或其他玻璃门，并在常规**“特性选项板”**中查看其特性，您会看到每个实例的**“组”**名称已更新，但只有“凹槽咖啡”门的实例**“名称”**特性更新自其默认值。

![](../../.gitbook/assets/12%20%283%29.png)

4 - 最后，我们来了解此插件如何对不同类型的图元进行排序：

1. 在模型中所需的任意位置，快速绘制**“直线(L)”**、**“矩形(R)”**和**“立方体(Alt + B)”**。这些是临时的，因此其精确位置并不重要。
2. 重新打开**“特性+ 选项板”**（如果已关闭），然后按 **Crtl + A** 以选择模型中所有可见的图元。
3. 在**“选择计数”**区域中查看，请注意，选定图元将划分为**“边”**（线）、**“面”**、**“实体”**（由面和边组成的三维形状，如立方体）**、** **“组”**等。

![](../../.gitbook/assets/13%20%283%29.png)

_**注意：**_ _此插件还会检测_ _**“顶点”**，可以使用名为_ _**“生成顶点”**的另一个插件创建顶点。如果要进行试验，请安装__**“生成顶点插件”**__，然后重复上述步骤。_

## 插件乐园

_针对现场的工匠和开发人员，FormIt 还随附了一个插件，允许您直接在 FormIt 内创建和测试自己的自定义插件。要充分利用此工具，需要掌握 HTML、CSS 和 JavaScript 知识，因此我们不会在此处详细介绍此工具，但如果您想要了解更多信息，可以访问_[_**构建 FormIt JavaScript 插件**_](https://formit3d.github.io/FormItExamplePlugins/docs/HowToBuild.html)_。_

1 - 可以采用之前安装**“插件选项板”**中插件的相同方法，来安装**“插件乐园”**。

2 - 以下是**“插件乐园”**的基本概述：

1. 通过单击 _<_铅笔_>_图标，打开**“插件乐园选项板”**。
2. 在选项板中，单击**“编辑”**按钮以打开内置的代码编辑器，来创建自定义插件。此插件预加载了用于创建立方体的插件的代码。
3. 单击**“播放”**按钮，测试将运行当前代码。在本例中，立方体创建器插件内容将显示在选项板中。

![](../../.gitbook/assets/14%20%283%29.png)

